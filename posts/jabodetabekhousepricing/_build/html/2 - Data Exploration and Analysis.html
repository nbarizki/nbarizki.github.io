
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Data Exploration and Analysis of House Price Offers &#8212; Linear Regression of Jabodetabek House Price and Implementation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Linear Regression Model of House Price in Jabodetabek Area and its Implementation" href="3%20-%20Linear%20Modeling%20of%20House%20Price.html" />
    <link rel="prev" title="Data Pre-Processing" href="1%20-%20Data%20Pre-Processing.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Linear Regression of Jabodetabek House Price and Implementation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    Linear Regression Model of Jabodetabek House Price and its Implementation
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1%20-%20Data%20Pre-Processing.html">
   <strong>
    Data Pre-Processing
   </strong>
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   <strong>
    Data Exploration and Analysis of House Price Offers
   </strong>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3%20-%20Linear%20Modeling%20of%20House%20Price.html">
   <strong>
    Linear Regression Model of House Price in Jabodetabek Area and its Implementation
   </strong>
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/nbarizki/jabodetabekhousepricing/main?urlpath=tree/2 - Data Exploration and Analysis.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/nbarizki/jabodetabekhousepricing"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/nbarizki/jabodetabekhousepricing/issues/new?title=Issue%20on%20page%20%2F2 - Data Exploration and Analysis.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/2 - Data Exploration and Analysis.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   <strong>
    Data Exploration and Analysis of House Price Offers
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   1. Introduction
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#forewords">
     <strong>
      Forewords
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contents">
     <strong>
      Contents
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#objectives">
     <strong>
      Objectives
     </strong>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataset-characteristics">
   2. Dataset Characteristics
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparing-the-data">
     2.1. Preparing the Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataset-features">
     2.2. Dataset Features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#features-list">
       <strong>
        Features List
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-types-of-each-features">
       <strong>
        Data types of each Features
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#electricity-features">
       <strong>
        <em>
         Electricity
        </em>
        Features
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#facilities-features">
       <strong>
        <em>
         Facilities
        </em>
        Features
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#duplicated-observations">
     2.3. Duplicated Observations
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features-with-suspicious-records">
     2.4. Features with Suspicious Records
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#price-records">
       <strong>
        Price Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bedrooms-bathrooms-records">
       <strong>
        Bedrooms &amp; Bathrooms Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#land-and-building-size">
       <strong>
        Land and Building Size
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#garages">
       <strong>
        Garages
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zeroes-and-missing-records">
     2.5. Zeroes and Missing Records
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#zeroes-records">
       <strong>
        Zeroes Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#missing-records">
       <strong>
        Missing Records
       </strong>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-exploration">
   3. Data Exploration
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#median-statistics-of-house-price">
     3.1. Median Statistics of House Price
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dki-jakarta-house-price">
       <strong>
        DKI Jakarta House Price
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#inference-about-jabodetabek-median-house-price">
       <strong>
        Inference about Jabodetabek Median House Price
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#testing-the-realibility-of-interval-estimate">
       <strong>
        Testing the Realibility of Interval Estimate
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-certificate-type">
     3.2. House Price according to Certificate Type
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-property-condition">
     3.3. House Price according to Property Condition
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-electricity">
     3.5. House Price according to Electricity
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-numerical-features">
     3.5. House Price according to Numerical Features
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparing-dataset-for-modeling">
   4. Preparing Dataset for Modeling
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#subsetting-the-test-set-for-assessing-prediction">
     4.1. Subsetting the Test Set for Assessing Prediction
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#missing-values">
     4.2. Missing Values
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#unnecessary-features-and-features-with-high-cardinality">
     4.3. Unnecessary Features and Features with High Cardinality
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conclusion-prepared-features">
     4.4. Conclusion: Prepared Features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#additional-pipeline-for-test-set">
     4.5. Additional: Pipeline for Test Set
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#transformer-to-drop-observations-with-missing-records">
       <strong>
        Transformer to drop Observations with Missing Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#features-dropper-transformer">
       <strong>
        Features-Dropper Transformer
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#transformer-for-specific-columns">
       <strong>
        Transformer for Specific Columns
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-pipeline-for-train-test-set">
       <strong>
        Creating Pipeline for Train-Test Set
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demonstrating-pipeline-for-train-set">
       <strong>
        Demonstrating Pipeline for Train Set
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demonstrating-pipeline-for-test-set">
       <strong>
        Demonstrating Pipeline for Test Set
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exporting-pipeline-for-future-use">
       <strong>
        Exporting Pipeline for Future Use
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exporting-train-test-set-for-other-models">
       <strong>
        Exporting Train-Test Set for other Models
       </strong>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#closing">
   5. Closing
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Data Exploration and Analysis of House Price Offers</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   <strong>
    Data Exploration and Analysis of House Price Offers
   </strong>
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   1. Introduction
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#forewords">
     <strong>
      Forewords
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contents">
     <strong>
      Contents
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#objectives">
     <strong>
      Objectives
     </strong>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataset-characteristics">
   2. Dataset Characteristics
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparing-the-data">
     2.1. Preparing the Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataset-features">
     2.2. Dataset Features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#features-list">
       <strong>
        Features List
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-types-of-each-features">
       <strong>
        Data types of each Features
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#electricity-features">
       <strong>
        <em>
         Electricity
        </em>
        Features
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#facilities-features">
       <strong>
        <em>
         Facilities
        </em>
        Features
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#duplicated-observations">
     2.3. Duplicated Observations
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features-with-suspicious-records">
     2.4. Features with Suspicious Records
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#price-records">
       <strong>
        Price Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bedrooms-bathrooms-records">
       <strong>
        Bedrooms &amp; Bathrooms Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#land-and-building-size">
       <strong>
        Land and Building Size
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#garages">
       <strong>
        Garages
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zeroes-and-missing-records">
     2.5. Zeroes and Missing Records
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#zeroes-records">
       <strong>
        Zeroes Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#missing-records">
       <strong>
        Missing Records
       </strong>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-exploration">
   3. Data Exploration
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#median-statistics-of-house-price">
     3.1. Median Statistics of House Price
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dki-jakarta-house-price">
       <strong>
        DKI Jakarta House Price
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#inference-about-jabodetabek-median-house-price">
       <strong>
        Inference about Jabodetabek Median House Price
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#testing-the-realibility-of-interval-estimate">
       <strong>
        Testing the Realibility of Interval Estimate
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-certificate-type">
     3.2. House Price according to Certificate Type
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-property-condition">
     3.3. House Price according to Property Condition
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-electricity">
     3.5. House Price according to Electricity
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#house-price-according-to-numerical-features">
     3.5. House Price according to Numerical Features
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparing-dataset-for-modeling">
   4. Preparing Dataset for Modeling
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#subsetting-the-test-set-for-assessing-prediction">
     4.1. Subsetting the Test Set for Assessing Prediction
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#missing-values">
     4.2. Missing Values
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#unnecessary-features-and-features-with-high-cardinality">
     4.3. Unnecessary Features and Features with High Cardinality
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conclusion-prepared-features">
     4.4. Conclusion: Prepared Features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#additional-pipeline-for-test-set">
     4.5. Additional: Pipeline for Test Set
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#transformer-to-drop-observations-with-missing-records">
       <strong>
        Transformer to drop Observations with Missing Records
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#features-dropper-transformer">
       <strong>
        Features-Dropper Transformer
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#transformer-for-specific-columns">
       <strong>
        Transformer for Specific Columns
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-pipeline-for-train-test-set">
       <strong>
        Creating Pipeline for Train-Test Set
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demonstrating-pipeline-for-train-set">
       <strong>
        Demonstrating Pipeline for Train Set
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demonstrating-pipeline-for-test-set">
       <strong>
        Demonstrating Pipeline for Test Set
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exporting-pipeline-for-future-use">
       <strong>
        Exporting Pipeline for Future Use
       </strong>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exporting-train-test-set-for-other-models">
       <strong>
        Exporting Train-Test Set for other Models
       </strong>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#closing">
   5. Closing
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="data-exploration-and-analysis-of-house-price-offers">
<h1><strong>Data Exploration and Analysis of House Price Offers</strong><a class="headerlink" href="#data-exploration-and-analysis-of-house-price-offers" title="Permalink to this headline">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="introduction">
<h1>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h1>
<section id="forewords">
<h2><strong>Forewords</strong><a class="headerlink" href="#forewords" title="Permalink to this headline">#</a></h2>
<p>The nominal of house price, especially in Jabodetabek, is always an interesting topic to be discussed because it is continuosly  growing up in unusual trends. In this occasion, we will try to gain insight regarding Jabodetabek house price by utilizing information from the internet. The source of information that we will use is <code class="docutils literal notranslate"><span class="pre">house</span> <span class="pre">listing</span> <span class="pre">data</span> <span class="pre">from</span> <span class="pre">an</span> <span class="pre">Indonesian</span> <span class="pre">property</span> <span class="pre">website</span></code>. This website provides service to advertise house listing over all provinces in Indonesia.</p>
</section>
<section id="contents">
<h2><strong>Contents</strong><a class="headerlink" href="#contents" title="Permalink to this headline">#</a></h2>
<p>This chapter will be focused on gaining some valuable insight of variables that is believed to be the important aspect of the house. We will try to apply relevant statistical method to make this analysis as scientifically valid as possible. Informative chart will also be presented to support findings.</p>
<p>After we gain some knowledge about the characteristic that lies underneath the data, in the next chapter of the analysis, we will generalize Jabodetabek house price using a linear model. The parametric form gives an easier interpretation about significancy of its variables in determining the average house price. The purposefulness of this generalization will be demonstrated to solve a simple fictitious problem to maximize profit of housing project, which will be explained in the next chapter.The dataset will then be processed and prepared carefully for our parametric model. Some imputation and transformation will be performed and explained as the final part of</p>
</section>
<section id="objectives">
<h2><strong>Objectives</strong><a class="headerlink" href="#objectives" title="Permalink to this headline">#</a></h2>
<ol class="simple">
<li><p>Identifying the dataset’s characteristic: number of observations, features, and datatypes</p></li>
<li><p>Identifying the missing data and ambiguous records and take some actions if needed</p></li>
<li><p>Analyze the dataset to gain knowledge of Jabodetabek House Price</p></li>
<li><p>Prepare the dataset for linear model, applying some transformation if deemed necessarry</p></li>
</ol>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="dataset-characteristics">
<h1>2. Dataset Characteristics<a class="headerlink" href="#dataset-characteristics" title="Permalink to this headline">#</a></h1>
<p>The data contains price of new and used house that offered along with its specification (such as land size, building size, number of floors, etc.). The listing is known to be either placed directly by homeowner (without third party involvement) or placed by some housing agents. Using this data, we can gain insight about <em>how home-owner in Jabodetabek Area values their house price and how each parameter associates with the offered price, i.e. how significant each of the property’s aspect that majority of owners believe will drive their house price worthiness</em>.</p>
<section id="preparing-the-data">
<h2>2.1. Preparing the Data<a class="headerlink" href="#preparing-the-data" title="Permalink to this headline">#</a></h2>
<p>Below code provided modules and options that will be utilized over this notebook. The specific analysis environment file (<code class="docutils literal notranslate"><span class="pre">.yaml</span></code>) will be provided in folder <code class="docutils literal notranslate"><span class="pre">\Environment</span></code> associated in this repositories.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># data wrangling, inspecting and utilities modules</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">modules.data_exploration</span> <span class="kn">import</span> <span class="n">DataExploration</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="c1"># statistical analysis modules</span>
<span class="kn">from</span> <span class="nn">scipy.stats.mstats</span> <span class="kn">import</span> <span class="n">mquantiles_cimj</span><span class="p">,</span> <span class="n">median_cihs</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">bootstrap</span>
<span class="c1"># informative chart modules</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">plotly.graph_objs</span> <span class="kn">import</span> <span class="n">Scattermapbox</span><span class="p">,</span> <span class="n">Layout</span><span class="p">,</span> <span class="n">Figure</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="c1"># data transformation modules</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span><span class="p">,</span> <span class="n">KNNImputer</span>
<span class="kn">from</span> <span class="nn">sklearn.base</span> <span class="kn">import</span> <span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span>
<span class="c1"># modules automating transformation flow</span>
<span class="kn">from</span> <span class="nn">sklearn.compose</span> <span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">make_pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">set_config</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">dump</span>

<span class="c1"># setting pandas options</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.float&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_info_columns&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span>


<span class="c1"># Load the data </span>
<span class="n">house_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Scraped_Data/jabodetabek_house_price.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="dataset-features">
<h2>2.2. Dataset Features<a class="headerlink" href="#dataset-features" title="Permalink to this headline">#</a></h2>
<p>This chapter explains <code class="docutils literal notranslate"><span class="pre">features</span></code> or <code class="docutils literal notranslate"><span class="pre">variables</span></code> that provided in the dataset.</p>
<section id="features-list">
<h3><strong>Features List</strong><a class="headerlink" href="#features-list" title="Permalink to this headline">#</a></h3>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="s1">&#39;features&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>

<span class="n">features</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>features</th>
      <th>658</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>url</th>
      <td>https://www.rumah123.com/properti/bogor/hos113...</td>
    </tr>
    <tr>
      <th>price_in_rp</th>
      <td>6,500,000,000.00</td>
    </tr>
    <tr>
      <th>title</th>
      <td>Rumah 2 Lantai Baru Unfurnished HGB di Equator...</td>
    </tr>
    <tr>
      <th>address</th>
      <td>Sentul City, Bogor</td>
    </tr>
    <tr>
      <th>district</th>
      <td>Sentul City</td>
    </tr>
    <tr>
      <th>city</th>
      <td>Bogor</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>-6.52</td>
    </tr>
    <tr>
      <th>long</th>
      <td>106.85</td>
    </tr>
    <tr>
      <th>facilities</th>
      <td>Taman, Keamanan 24 jam, Akses Parkir,  Taman, ...</td>
    </tr>
    <tr>
      <th>property_type</th>
      <td>rumah</td>
    </tr>
    <tr>
      <th>ads_id</th>
      <td>hos11343641</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>4.00</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>5.00</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>313.00</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>360.00</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>2.00</td>
    </tr>
    <tr>
      <th>certificate</th>
      <td>hgb - hak guna bangunan</td>
    </tr>
    <tr>
      <th>electricity</th>
      <td>5500 mah</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>2.00</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>1.00</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>2.00</td>
    </tr>
    <tr>
      <th>building_age</th>
      <td>0.00</td>
    </tr>
    <tr>
      <th>year_built</th>
      <td>2,022.00</td>
    </tr>
    <tr>
      <th>property_condition</th>
      <td>baru</td>
    </tr>
    <tr>
      <th>building_orientation</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>2.00</td>
    </tr>
    <tr>
      <th>furnishing</th>
      <td>unfurnished</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The feature names are quite understandable and the values are not ambiguous.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Facilities</span></code> is unique for each house.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Carports</span></code> and <code class="docutils literal notranslate"><span class="pre">Garages</span></code> are different entities</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lat</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> represents <code class="docutils literal notranslate"><span class="pre">estimated</span> <span class="pre">geodetical</span> <span class="pre">location</span></code> of area which that house is located, based on the <code class="docutils literal notranslate"><span class="pre">address</span></code> variables (hence not a specific coordinate of each house).</p></li>
</ul>
</section>
<section id="data-types-of-each-features">
<h3><strong>Data types of each Features</strong><a class="headerlink" href="#data-types-of-each-features" title="Permalink to this headline">#</a></h3>
<p>Each variables is best explained with specific data type (either in <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">categorical</span></code>). We will apply data types of each features accordingly as explained as below:</p>
<ol class="simple">
<li><p>Some features that explains <em>number of instances</em> (e.g. number of <code class="docutils literal notranslate"><span class="pre">garages</span></code> provided) is best explained as an integer. For convenience, we will cast the datatypes of those features.</p></li>
<li><p>Some features fall into <em>categorical</em> datatypes (e.g. <code class="docutils literal notranslate"><span class="pre">certificate</span></code>) and some categories naturally have order (e.g. <code class="docutils literal notranslate"><span class="pre">electricity</span></code>)</p></li>
</ol>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cast_int_cols_indices</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="nb">format</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">25</span><span class="p">],</span> <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="s1">&#39;Int64&#39;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="n">cast_categorical_cols_indices</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="nb">format</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">26</span><span class="p">],</span> <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="nb">format</span> <span class="ow">in</span> <span class="p">(</span>
        <span class="n">cast_int_cols_indices</span> 
        <span class="o">+</span> <span class="n">cast_categorical_cols_indices</span><span class="p">):</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
    
<span class="n">house_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 3553 entries, 0 to 3552
Data columns (total 27 columns):
 #   Column                Non-Null Count  Dtype   
---  ------                --------------  -----   
 0   url                   3553 non-null   object  
 1   price_in_rp           3553 non-null   float64 
 2   title                 3553 non-null   object  
 3   address               3553 non-null   object  
 4   district              3553 non-null   object  
 5   city                  3553 non-null   object  
 6   lat                   3553 non-null   float64 
 7   long                  3553 non-null   float64 
 8   facilities            3553 non-null   object  
 9   property_type         3552 non-null   category
 10  ads_id                3549 non-null   object  
 11  bedrooms              3519 non-null   Int64   
 12  bathrooms             3524 non-null   Int64   
 13  land_size_m2          3551 non-null   float64 
 14  building_size_m2      3551 non-null   float64 
 15  carports              3553 non-null   Int64   
 16  certificate           3412 non-null   category
 17  electricity           3553 non-null   category
 18  maid_bedrooms         3553 non-null   Int64   
 19  maid_bathrooms        3553 non-null   Int64   
 20  floors                3547 non-null   Int64   
 21  building_age          2108 non-null   Int64   
 22  year_built            2108 non-null   Int64   
 23  property_condition    3307 non-null   category
 24  building_orientation  1906 non-null   category
 25  garages               3553 non-null   Int64   
 26  furnishing            3166 non-null   category
dtypes: Int64(9), category(6), float64(5), object(7)
memory usage: 637.6+ KB
</pre></div>
</div>
</div>
</div>
<p>Let’s inspect each of the categorical column:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">category_columns</span> <span class="o">=</span> \
    <span class="n">house_df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>

<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">category_columns</span><span class="p">:</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">house_df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s1">&#39;. Categories: &#39;</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>property_type . Categories:  [&#39;rumah&#39;] 

certificate . Categories:  [&#39;hgb - hak guna bangunan&#39;, &#39;hp - hak pakai&#39;, &#39;lainnya (ppjb,girik,adat,dll)&#39;, &#39;shm - sertifikat hak milik&#39;] 

electricity . Categories:  [&#39;10000 mah&#39;, &#39;10600 mah&#39;, &#39;11000 mah&#39;, &#39;12700 mah&#39;, &#39;1300 mah&#39;, &#39;13200 mah&#39;, &#39;13300 mah&#39;, &#39;13900 mah&#39;, &#39;16500 mah&#39;, &#39;17600 mah&#39;, &#39;2200 mah&#39;, &#39;22000 mah&#39;, &#39;23000 mah&#39;, &#39;24000 mah&#39;, &#39;3300 mah&#39;, &#39;33000 mah&#39;, &#39;3500 mah&#39;, &#39;41500 mah&#39;, &#39;4400 mah&#39;, &#39;450 mah&#39;, &#39;47500 mah&#39;, &#39;53000 mah&#39;, &#39;5500 mah&#39;, &#39;6600 mah&#39;, &#39;7600 mah&#39;, &#39;7700 mah&#39;, &#39;8000 mah&#39;, &#39;900 mah&#39;, &#39;9500 mah&#39;, &#39;lainnya mah&#39;] 

property_condition . Categories:  [&#39;bagus&#39;, &#39;bagus sekali&#39;, &#39;baru&#39;, &#39;butuh renovasi&#39;, &#39;semi furnished&#39;, &#39;sudah renovasi&#39;, &#39;unfurnished&#39;] 

building_orientation . Categories:  [&#39;barat&#39;, &#39;barat daya&#39;, &#39;barat laut&#39;, &#39;selatan&#39;, &#39;tenggara&#39;, &#39;timur&#39;, &#39;timur laut&#39;, &#39;utara&#39;] 

furnishing . Categories:  [&#39;baru&#39;, &#39;furnished&#39;, &#39;semi furnished&#39;, &#39;unfurnished&#39;] 
</pre></div>
</div>
</div>
</div>
<p>Several features have mixed record of categories (for example, <code class="docutils literal notranslate"><span class="pre">property_condition</span></code> has furnishing records, so has <code class="docutils literal notranslate"><span class="pre">furnishing</span></code>) and deemed inconsistent for ordering this categories. Let’s inspect those observations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">property_condition</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;unfurnished&#39;</span><span class="p">,</span> <span class="s1">&#39;semi furnished&#39;</span><span class="p">]),</span> <span class="s1">&#39;property_condition&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>unfurnished       25
semi furnished     4
bagus              0
bagus sekali       0
baru               0
butuh renovasi     0
sudah renovasi     0
Name: property_condition, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span> <span class="o">==</span> <span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;furnishing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>baru              29
furnished          0
semi furnished     0
unfurnished        0
Name: furnishing, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span> <span class="o">==</span> <span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;furnishing&#39;</span><span class="p">,</span> <span class="s1">&#39;property_condition&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>url</th>
      <th>furnishing</th>
      <th>property_condition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>274</th>
      <td>https://www.rumah123.com/properti/bekasi/hos11...</td>
      <td>baru</td>
      <td>semi furnished</td>
    </tr>
    <tr>
      <th>275</th>
      <td>https://www.rumah123.com/properti/bekasi/hos11...</td>
      <td>baru</td>
      <td>semi furnished</td>
    </tr>
    <tr>
      <th>276</th>
      <td>https://www.rumah123.com/properti/bekasi/hos11...</td>
      <td>baru</td>
      <td>semi furnished</td>
    </tr>
    <tr>
      <th>1504</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1505</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1506</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1554</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1555</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1556</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1557</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1558</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1559</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1679</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1710</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1711</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1712</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>semi furnished</td>
    </tr>
    <tr>
      <th>1834</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1835</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1836</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1837</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1948</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1949</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1950</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1951</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1952</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1953</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>1954</th>
      <td>https://www.rumah123.com/properti/depok/hos113...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>2980</th>
      <td>https://www.rumah123.com/properti/tangerang/ho...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>3119</th>
      <td>https://www.rumah123.com/properti/tangerang/ho...</td>
      <td>baru</td>
      <td>unfurnished</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Both condition paired and total observation matches. It maybe in any chance the records are swapped between the columns id <code class="docutils literal notranslate"><span class="pre">funishing</span></code> and <code class="docutils literal notranslate"><span class="pre">property_condition</span></code> (indeed confirmed after further inspection of each url’s.)</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">replace_furnish</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span> <span class="o">==</span> <span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;property_condition&#39;</span><span class="p">]</span>
<span class="n">replace_furnish</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">replace_furnish</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;semi furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;unfurnished&#39;</span><span class="p">])</span>
<span class="n">replace_furnish</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;semi furnished&#39;, &#39;semi furnished&#39;, &#39;semi furnished&#39;, &#39;unfurnished&#39;, &#39;unfurnished&#39;, ..., &#39;unfurnished&#39;, &#39;unfurnished&#39;, &#39;unfurnished&#39;, &#39;unfurnished&#39;, &#39;unfurnished&#39;]
Length: 29
Categories (4, object): [&#39;baru&#39;, &#39;furnished&#39;, &#39;semi furnished&#39;, &#39;unfurnished&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">replace_furnish</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span> <span class="o">==</span> <span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;property_condition&#39;</span><span class="p">]</span>
<span class="n">replace_furnish</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span>
    <span class="n">replace_furnish</span><span class="p">,</span> 
    <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;semi furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;unfurnished&#39;</span><span class="p">])</span>
<span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span> <span class="o">==</span> <span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;furnishing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">replace_furnish</span>


<span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>unfurnished       2091
semi furnished     837
furnished          238
baru                 0
Name: furnishing, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">property_condition</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;semi furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;unfurnished&#39;</span><span class="p">])]</span> <span class="o">=</span> \
    <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">property_condition</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;semi furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;unfurnished&#39;</span><span class="p">])]</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
        <span class="n">property_condition</span><span class="o">=</span><span class="s1">&#39;baru&#39;</span>
    <span class="p">)</span> 

<span class="n">house_df</span><span class="o">.</span><span class="n">property_condition</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>bagus             1437
baru              1357
bagus sekali       261
sudah renovasi     158
butuh renovasi      94
semi furnished       0
unfurnished          0
Name: property_condition, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Lastly, we need to re-adjust categories for each features.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">furnishing</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span>
        <span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span><span class="p">,</span> 
        <span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">furnishing</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="n">house_df</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">property_condition</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span>
        <span class="n">house_df</span><span class="o">.</span><span class="n">property_condition</span><span class="p">,</span> 
        <span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">property_condition</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;property_condition&#39;</span><span class="p">,</span> <span class="s1">&#39;furnishing&#39;</span><span class="p">]:</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">house_df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s1">&#39;. Categories: &#39;</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>property_condition . Categories:  [&#39;bagus&#39;, &#39;bagus sekali&#39;, &#39;baru&#39;, &#39;sudah renovasi&#39;, &#39;butuh renovasi&#39;] 

furnishing . Categories:  [&#39;unfurnished&#39;, &#39;semi furnished&#39;, &#39;furnished&#39;] 
</pre></div>
</div>
</div>
</div>
<p>For non-ambiguous categories: <code class="docutils literal notranslate"><span class="pre">certificate</span></code> and <code class="docutils literal notranslate"><span class="pre">electricity</span></code>, will be ordered as follows:</p>
<ol class="simple">
<li><p>Certificate categories order shall be: <code class="docutils literal notranslate"><span class="pre">1)</span> <span class="pre">SHM;</span> <span class="pre">2)</span> <span class="pre">HGB;</span> <span class="pre">3)</span> <span class="pre">HP;</span> <span class="pre">4)</span> <span class="pre">lainnya</span></code>.</p></li>
<li><p>Electricity order shall be based on its energy charge</p></li>
</ol>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sort_elect</span><span class="p">(</span><span class="n">string_value</span><span class="p">):</span>
    <span class="n">num_value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">string_value</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">num_value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># ordering of category</span>
<span class="n">certificate_order</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;shm - sertifikat hak milik&#39;</span><span class="p">,</span> <span class="s1">&#39;hgb - hak guna bangunan&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;hp - hak pakai&#39;</span><span class="p">,</span> <span class="s1">&#39;lainnya (ppjb,girik,adat,dll)&#39;</span>
    <span class="p">]</span>
<span class="n">electricity_order</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">house_df</span><span class="p">[</span><span class="s1">&#39;electricity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">categories</span><span class="p">),</span>
    <span class="n">key</span><span class="o">=</span><span class="n">sort_elect</span>
    <span class="p">)</span>
<span class="n">property_condition_order</span> <span class="o">=</span> <span class="p">[</span>
     <span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;bagus sekali&#39;</span><span class="p">,</span> <span class="s1">&#39;bagus&#39;</span><span class="p">,</span> <span class="s1">&#39;sudah renovasi&#39;</span><span class="p">,</span>
     <span class="s1">&#39;butuh renovasi&#39;</span>
    <span class="p">]</span>
<span class="n">furnishing_order</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;semi furnished&#39;</span><span class="p">,</span> <span class="s1">&#39;unfurnished&#39;</span>
    <span class="p">]</span>
<span class="c1"># apply ordering</span>
<span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">order</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;certificate&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity&#39;</span><span class="p">,</span> <span class="s1">&#39;property_condition&#39;</span><span class="p">,</span> <span class="s1">&#39;furnishing&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="n">certificate_order</span><span class="p">,</span> <span class="n">electricity_order</span><span class="p">,</span> <span class="n">property_condition_order</span><span class="p">,</span> <span class="n">furnishing_order</span><span class="p">]):</span>
    <span class="n">house_df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> \
        <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span>
            <span class="n">values</span><span class="o">=</span><span class="n">house_df</span><span class="p">[</span><span class="n">column</span><span class="p">],</span>
            <span class="n">categories</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="electricity-features">
<h3><strong><em>Electricity</em> Features</strong><a class="headerlink" href="#electricity-features" title="Permalink to this headline">#</a></h3>
<p>While <em>ordinal category</em> of <code class="docutils literal notranslate"><span class="pre">electricity</span></code> features is nice to have as it is pretty distinguishable to analyze (i.e. eliminate value-to-value scaling in an axis thus looks neat in graphical comparison), we also need its numerical format for our regression model.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">electricity_num_format</span><span class="p">(</span><span class="n">records</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">records</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="n">electricity_num_format_vectd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">electricity_num_format</span><span class="p">)</span>
<span class="n">house_df</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">electricity_num</span><span class="o">=</span><span class="n">electricity_num_format_vectd</span><span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">electricity</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="facilities-features">
<h3><strong><em>Facilities</em> Features</strong><a class="headerlink" href="#facilities-features" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">facilities</span></code> features is presented in <code class="docutils literal notranslate"><span class="pre">list</span></code> format, meaning that there will be more than one facilities for each house and has a lot of different text between each observations but possibly has similar meaning. Let’s unpack the list first.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">facilities</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">facilities</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">facilities</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">facilities</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">facility</span> <span class="ow">in</span> <span class="n">facilities</span><span class="p">:</span>
        <span class="n">facility_formatted</span> <span class="o">=</span> <span class="n">facility</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">facility_formatted</span><span class="p">:</span>
            <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">index</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;fac_</span><span class="si">{</span><span class="n">facility_formatted</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>  
</pre></div>
</div>
</div>
</div>
<p>Using lines of code, we will identify similar facilities as a single entity and apply a <code class="docutils literal notranslate"><span class="pre">one-hot</span> <span class="pre">encoding</span></code> to provide them as variables.</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># merging identical facilities into one</span>
<span class="c1"># format: (delete, preserve)</span>
<span class="n">col_pair_duplicated</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;fac_keamanan_24_jam&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_keamanan&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_track_lari&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_jogging_track&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_tempat_laundry&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_tempat_jemuran&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_taman&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_garden&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_carport&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_akses_parkir&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_pemanas_air&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_water_heater&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_kompor&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kitchen_set&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_2_unit_ac&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_ac&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_carport_1_mobil&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_akses_parkir&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_security_24_jam&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_keamanan&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_pool&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kolam_renang&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_private_pool&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kolam_renang&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_kolam_renang_anak&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kolam_renang&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_kitchen_set_(opsional)&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kitchen_set&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_security24_jam&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_keamanan&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_taman_luas&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_garden&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_musholla_exclusive&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_masjid&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_toren_500_liter&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_plumbing_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_torn_650ltr&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_plumbing_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_one_gate_sistem&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_one_gate_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_torn_air&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_plumbing_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_jetpump&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_plumbing_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_cctv_area&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_cctv&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_mushola&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_masjid&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_security_24h&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_keamanan&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_taman_minimalis&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_garden&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_swimming_pool&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kolam_renang&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_full_kitchen_set&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kitchen_set&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_ac_2_unit&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_ac&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_ac_3_unit&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_ac&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_free_kitchen_set&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kitchen_set&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_onegate&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_one_gate_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_security_24jam&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_keamanan&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_1_unit_ac&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_ac&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_securty_24_jam&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_keamanan&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_carport_2_mobil&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_akses_parkir&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_smart_lock_door&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_smart_home&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_torrent&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_plumbing_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_servis_area&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_service_area&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_smarthome&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_smart_home&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_dapur_bersih_dan_kotor&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_wastafel&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_pompa_air_wasser_dan_booster&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_plumbing_system&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;fac_kompor_exhaust&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_kitchen_set&#39;</span><span class="p">)</span>
    <span class="p">]</span>
<span class="n">fac_to_drop</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;fac_posisi_hoek&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_void&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_living_room&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fac_lemari_kayu&#39;</span><span class="p">,</span> <span class="s1">&#39;fac_pagar&#39;</span>
    <span class="p">]</span>
<span class="k">for</span> <span class="n">delete</span><span class="p">,</span> <span class="n">preserve</span> <span class="ow">in</span> <span class="n">col_pair_duplicated</span><span class="p">:</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="p">[</span><span class="n">delete</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">preserve</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
     <span class="n">delete</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>   
    <span class="p">)</span>
<span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
    <span class="n">fac_to_drop</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="c1"># manually apply one-hot encoding</span>
<span class="n">fac_columns</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;fac_.*&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
<span class="n">n_</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">fac_columns</span><span class="p">)</span>
<span class="n">fillna_fac</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
    <span class="n">fac_columns</span><span class="p">,</span> 
    <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_</span><span class="p">)))</span>
    <span class="p">])</span>
<span class="n">house_df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">fillna_fac</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="nb">list</span><span class="p">(</span><span class="n">fac_columns</span><span class="p">)]</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="nb">list</span><span class="p">(</span><span class="n">fac_columns</span><span class="p">)]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;Int64&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="n">house_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1746</th>
      <th>2990</th>
      <th>2227</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>url</th>
      <td>https://www.rumah123.com/properti/depok/hos106...</td>
      <td>https://www.rumah123.com/properti/tangerang/ho...</td>
      <td>https://www.rumah123.com/properti/jakarta-bara...</td>
    </tr>
    <tr>
      <th>price_in_rp</th>
      <td>1,800,000,000.00</td>
      <td>6,900,000,000.00</td>
      <td>3,200,000,000.00</td>
    </tr>
    <tr>
      <th>title</th>
      <td>Rumah Strategis di Panoramic Garden Dekat Tapo...</td>
      <td>RUMAH MEWAH BANGETT MODERN CLASSIC MATERIAL BE...</td>
      <td>ANDRE TJHIA Meruya Tanah 10x25 Lokasi Bagus Sa...</td>
    </tr>
    <tr>
      <th>address</th>
      <td>Sukmajaya, Depok</td>
      <td>BSD The Icon, Tangerang</td>
      <td>Meruya, Jakarta Barat</td>
    </tr>
    <tr>
      <th>district</th>
      <td>Sukmajaya</td>
      <td>BSD The Icon</td>
      <td>Meruya</td>
    </tr>
    <tr>
      <th>city</th>
      <td>Depok</td>
      <td>Tangerang</td>
      <td>Jakarta Barat</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>-6.40</td>
      <td>-6.31</td>
      <td>-6.21</td>
    </tr>
    <tr>
      <th>long</th>
      <td>106.84</td>
      <td>106.65</td>
      <td>106.73</td>
    </tr>
    <tr>
      <th>facilities</th>
      <td>[Keamanan, Taman]</td>
      <td>[Masjid,  Jogging Track,  Taman, Keamanan,  CC...</td>
      <td>[Taman, Ac, AC,  Keamanan, Track Lari,  Joggin...</td>
    </tr>
    <tr>
      <th>property_type</th>
      <td>rumah</td>
      <td>rumah</td>
      <td>rumah</td>
    </tr>
    <tr>
      <th>ads_id</th>
      <td>hos10612591</td>
      <td>hos10134916</td>
      <td>hos9903505</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>3</td>
      <td>4</td>
      <td>4</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>3</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>106.00</td>
      <td>224.00</td>
      <td>250.00</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>150.00</td>
      <td>350.00</td>
      <td>239.00</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>certificate</th>
      <td>shm - sertifikat hak milik</td>
      <td>shm - sertifikat hak milik</td>
      <td>shm - sertifikat hak milik</td>
    </tr>
    <tr>
      <th>electricity</th>
      <td>3300 mah</td>
      <td>7700 mah</td>
      <td>4400 mah</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>2</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>building_age</th>
      <td>&lt;NA&gt;</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>year_built</th>
      <td>&lt;NA&gt;</td>
      <td>2022</td>
      <td>2022</td>
    </tr>
    <tr>
      <th>property_condition</th>
      <td>bagus</td>
      <td>bagus sekali</td>
      <td>bagus sekali</td>
    </tr>
    <tr>
      <th>building_orientation</th>
      <td>NaN</td>
      <td>selatan</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>furnishing</th>
      <td>unfurnished</td>
      <td>semi furnished</td>
      <td>unfurnished</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>3,300.00</td>
      <td>7,700.00</td>
      <td>4,400.00</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="duplicated-observations">
<h2>2.3. Duplicated Observations<a class="headerlink" href="#duplicated-observations" title="Permalink to this headline">#</a></h2>
<p>There is a chance that house’s owner publish multiple ads for their house, which will be recorded as different <code class="docutils literal notranslate"><span class="pre">url</span></code> although other records are the same. So we will drop if any duplicated observations exist.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">duplicates_nos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;facilities&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duplicated observations: </span><span class="si">{</span><span class="n">duplicates_nos</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Duplicated observations: 88
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
    <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;facilities&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
    <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="n">duplicates_nos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;facilities&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duplicated observations: </span><span class="si">{</span><span class="n">duplicates_nos</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Duplicated observations: 0
</pre></div>
</div>
</div>
</div>
</section>
<section id="features-with-suspicious-records">
<h2>2.4. Features with Suspicious Records<a class="headerlink" href="#features-with-suspicious-records" title="Permalink to this headline">#</a></h2>
<p>The most simple way to detect anomaly in the records is by taking a quick glance in the dataset summary.</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">15</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;50%&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>median</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price_in_rp</th>
      <td>3,465.00</td>
      <td>4,182,611,544.01</td>
      <td>13,884,600,751.69</td>
      <td>42,000,000.00</td>
      <td>1,500,000,000.00</td>
      <td>580,000,000,000.00</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>3,465.00</td>
      <td>-6.33</td>
      <td>0.13</td>
      <td>-6.89</td>
      <td>-6.30</td>
      <td>-6.10</td>
    </tr>
    <tr>
      <th>long</th>
      <td>3,465.00</td>
      <td>106.79</td>
      <td>0.17</td>
      <td>106.40</td>
      <td>106.80</td>
      <td>109.77</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>3,432.00</td>
      <td>3.33</td>
      <td>2.70</td>
      <td>1.00</td>
      <td>3.00</td>
      <td>99.00</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>3,437.00</td>
      <td>2.63</td>
      <td>2.73</td>
      <td>1.00</td>
      <td>2.00</td>
      <td>99.00</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>3,463.00</td>
      <td>205.16</td>
      <td>405.84</td>
      <td>12.00</td>
      <td>108.00</td>
      <td>8,000.00</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>3,463.00</td>
      <td>186.14</td>
      <td>249.04</td>
      <td>1.00</td>
      <td>110.00</td>
      <td>6,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It is also useful to identify patterns and range of each variables using automatically-generated histogram, as below.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">28</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_51_0.png" src="_images/2 - Data Exploration and Analysis_51_0.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">28</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_52_0.png" src="_images/2 - Data Exploration and Analysis_52_0.png" />
</div>
</div>
<p>We can see that the data is right-skewed heavily.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">facilities</span></code> feature, we can also inspect the histogram to take a quick glance of their proportion from overall dataset.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">28</span><span class="p">:]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_54_0.png" src="_images/2 - Data Exploration and Analysis_54_0.png" />
</div>
</div>
<p>Majority of the facilities has a very low proportion of existance. For example, majority of observations don’t have <code class="docutils literal notranslate"><span class="pre">fac_plumbing_system</span></code> in their record. Those kind of variables possibly will be proven insignificant as a feature to generalize the dataset.</p>
<section id="price-records">
<h3><strong>Price Records</strong><a class="headerlink" href="#price-records" title="Permalink to this headline">#</a></h3>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;50%&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>median</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price_in_rp</th>
      <td>3,465.00</td>
      <td>4,182,611,544.01</td>
      <td>13,884,600,751.69</td>
      <td>42,000,000.00</td>
      <td>1,500,000,000.00</td>
      <td>580,000,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Surely, standard deviation of <code class="docutils literal notranslate"><span class="pre">price_in_rp</span></code> is inflated by a nonproportionally large maximum price records. Currently largest value is Rp. 580 Billion, which is abnormally high for house price.</p>
<p>After inspecting, turns out that in the description, it explains that the price should be Rp. 5.8 Billion.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">price_in_rp</span> <span class="o">==</span> <span class="mi">580000000000</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5800000000</span>
</pre></div>
</div>
</div>
</div>
<p>The minimum price is also suspicious for typical house price in Jabodetabek (only Rp. 42 million).</p>
<div class="cell tag_output-scroll tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">minimum_price</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="n">house_df</span><span class="o">.</span><span class="n">price_in_rp</span> <span class="o">==</span> <span class="mi">42000000</span><span class="p">,</span> 
        <span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">]</span>
    <span class="p">]</span>
<span class="n">minimum_price</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>url</th>
      <th>price_in_rp</th>
      <th>bedrooms</th>
      <th>land_size_m2</th>
      <th>building_size_m2</th>
      <th>floors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>159</th>
      <td>https://www.rumah123.com/properti/bekasi/hos11...</td>
      <td>42,000,000.00</td>
      <td>2</td>
      <td>60.00</td>
      <td>40.00</td>
      <td>1</td>
    </tr>
    <tr>
      <th>340</th>
      <td>https://www.rumah123.com/properti/bekasi/hos11...</td>
      <td>42,000,000.00</td>
      <td>2</td>
      <td>60.00</td>
      <td>40.00</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>After further inspection, turns out those records are house listing offer for <em>Credit Transfer</em>, and the price records are the <em>Credit Transfer Fee</em>. We should remove those records and other <em>Credit Transfer</em> offers since those sample may disturb our price distribution and irrelevant for our subject of analysis.</p>
<div class="cell tag_output-scroll tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="n">house_df</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\n&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">title_tag_to_drop</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;overkredit&#39;</span><span class="p">,</span> <span class="s1">&#39;over kredit&#39;</span><span class="p">,</span> <span class="s1">&#39;oper kredit&#39;</span><span class="p">,</span> <span class="s1">&#39;operkredit&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;takeover&#39;</span><span class="p">,</span> <span class="s1">&#39;take over&#39;</span><span class="p">,</span> <span class="s1">&#39;take oper&#39;</span><span class="p">,</span><span class="s1">&#39;oper&#39;</span><span class="p">,</span> <span class="s1">&#39;dioper&#39;</span><span class="p">,</span> <span class="s1">&#39;diover&#39;</span><span class="p">]</span>
<span class="n">price_records_to_drop</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">42000000</span><span class="p">,</span> <span class="mi">70000000</span><span class="p">,</span> <span class="mi">75000000</span><span class="p">,</span> <span class="mi">85000000</span><span class="p">,</span> <span class="mi">100000000</span><span class="p">,</span> <span class="mi">130000000</span><span class="p">,</span>
    <span class="mi">135000000</span>
    <span class="p">]</span>
<span class="n">url_to_drop</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;https://www.rumah123.com/properti/bogor/hos11086291/#qid~a3b85dc6-9dd7-4fa9-9eac-113f4eba7868&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://www.rumah123.com/properti/tangerang/hos11359461/#qid~0d9492e8-7326-465d-85ee-e54559fedc26&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://www.rumah123.com/properti/bogor/hos11351345/#qid~9ab0b10c-8ceb-4c9a-9e7a-479f91a141d1&#39;</span>
    <span class="p">]</span>
<span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">title_tag_to_drop</span><span class="p">:</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;^</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">\s&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;\s</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">\s&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;\s</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">$&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="k">for</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">price_records_to_drop</span><span class="p">:</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">price_in_rp</span> <span class="o">==</span> <span class="n">price</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">url_to_drop</span><span class="p">:</span>
    <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="n">url</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">url</span> <span class="o">==</span> <span class="s1">&#39;https://www.rumah123.com/properti/bekasi/hos11222131/#qid~aeb345f5-d0dd-46bf-8173-9872e4274ee2&#39;</span><span class="p">]</span>\
    <span class="o">.</span><span class="n">price_in_rp</span> <span class="o">==</span> <span class="mi">1250000000</span>

<span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;50%&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>median</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price_in_rp</th>
      <td>3,446.00</td>
      <td>4,038,244,631.46</td>
      <td>9,873,694,516.03</td>
      <td>125,000,000.00</td>
      <td>1,500,000,000.00</td>
      <td>250,000,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Above codes is our best approach to fix some minimum values.</p>
<p>In the next chapter, we will analyze the effect of the suspicious prices using the more proven statistical approaches such as <code class="docutils literal notranslate"><span class="pre">outliers</span> <span class="pre">detection</span></code>, <code class="docutils literal notranslate"><span class="pre">high</span> <span class="pre">leverage</span> <span class="pre">observation</span></code>, and <code class="docutils literal notranslate"><span class="pre">cook</span> <span class="pre">distance</span></code>.</p>
</section>
<section id="bedrooms-bathrooms-records">
<h3><strong>Bedrooms &amp; Bathrooms Records</strong><a class="headerlink" href="#bedrooms-bathrooms-records" title="Permalink to this headline">#</a></h3>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;50%&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>median</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>bedrooms</th>
      <td>3,414.00</td>
      <td>3.34</td>
      <td>2.71</td>
      <td>1.00</td>
      <td>3.00</td>
      <td>99.00</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>3,418.00</td>
      <td>2.63</td>
      <td>2.73</td>
      <td>1.00</td>
      <td>2.00</td>
      <td>99.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="p">})</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>bedrooms</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
      <th>13</th>
      <th>16</th>
      <th>20</th>
      <th>21</th>
      <th>36</th>
      <th>37</th>
      <th>50</th>
      <th>54</th>
      <th>57</th>
      <th>99</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>18</td>
      <td>919</td>
      <td>1342</td>
      <td>780</td>
      <td>212</td>
      <td>92</td>
      <td>14</td>
      <td>10</td>
      <td>2</td>
      <td>5</td>
      <td>2</td>
      <td>5</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;bathrooms&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="p">})</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>bathrooms</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
      <th>13</th>
      <th>15</th>
      <th>16</th>
      <th>20</th>
      <th>21</th>
      <th>36</th>
      <th>50</th>
      <th>54</th>
      <th>57</th>
      <th>99</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>747</td>
      <td>1099</td>
      <td>943</td>
      <td>434</td>
      <td>109</td>
      <td>33</td>
      <td>20</td>
      <td>10</td>
      <td>3</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Simple logic, house with a large amount of bedrooms/bathrooms tends to associated with large building size. House with &gt;= 20 bedrooms may raise suspicion (especially 99!).</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">large_bedrooms_inst</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="n">house_df</span><span class="o">.</span><span class="n">bedrooms</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">,</span> 
        <span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">]</span>
    <span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">)</span>

<span class="n">large_bedrooms_inst</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>url</th>
      <th>price_in_rp</th>
      <th>bedrooms</th>
      <th>land_size_m2</th>
      <th>building_size_m2</th>
      <th>floors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2283</th>
      <td>https://www.rumah123.com/properti/jakarta-sela...</td>
      <td>26,000,000,000.00</td>
      <td>20</td>
      <td>915.00</td>
      <td>600.00</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2545</th>
      <td>https://www.rumah123.com/properti/jakarta-sela...</td>
      <td>27,000,000,000.00</td>
      <td>20</td>
      <td>1,195.00</td>
      <td>950.00</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2282</th>
      <td>https://www.rumah123.com/properti/jakarta-sela...</td>
      <td>26,000,000,000.00</td>
      <td>21</td>
      <td>900.00</td>
      <td>700.00</td>
      <td>2</td>
    </tr>
    <tr>
      <th>346</th>
      <td>https://www.rumah123.com/properti/bekasi/hos11...</td>
      <td>9,000,000,000.00</td>
      <td>36</td>
      <td>939.00</td>
      <td>500.00</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1333</th>
      <td>https://www.rumah123.com/properti/bogor/hos109...</td>
      <td>2,700,000,000.00</td>
      <td>37</td>
      <td>500.00</td>
      <td>350.00</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2483</th>
      <td>https://www.rumah123.com/properti/jakarta-sela...</td>
      <td>30,000,000,000.00</td>
      <td>50</td>
      <td>517.00</td>
      <td>2,417.00</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2687</th>
      <td>https://www.rumah123.com/properti/jakarta-sela...</td>
      <td>28,000,000,000.00</td>
      <td>54</td>
      <td>890.00</td>
      <td>1,800.00</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2634</th>
      <td>https://www.rumah123.com/properti/jakarta-sela...</td>
      <td>11,800,000,000.00</td>
      <td>57</td>
      <td>491.00</td>
      <td>1,500.00</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2888</th>
      <td>https://www.rumah123.com/properti/tangerang/ho...</td>
      <td>55,000,000,000.00</td>
      <td>99</td>
      <td>1,150.00</td>
      <td>6,000.00</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Turns out that houses with large number of bedrooms is either <code class="docutils literal notranslate"><span class="pre">boarding</span> <span class="pre">house</span> </code>(<em>kost</em>) or <code class="docutils literal notranslate"><span class="pre">guest</span> <span class="pre">house</span></code>. Let’s just keep those records.</p>
</section>
<section id="land-and-building-size">
<h3><strong>Land and Building Size</strong><a class="headerlink" href="#land-and-building-size" title="Permalink to this headline">#</a></h3>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;building_size_m2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;50%&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>median</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>land_size_m2</th>
      <td>3,444.00</td>
      <td>205.92</td>
      <td>406.82</td>
      <td>12.00</td>
      <td>108.00</td>
      <td>8,000.00</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>3,444.00</td>
      <td>186.91</td>
      <td>249.50</td>
      <td>1.00</td>
      <td>112.50</td>
      <td>6,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There is a suspicious observation with <code class="docutils literal notranslate"><span class="pre">building</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">m2</span></code> and we will drop this observations.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
    <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">building_size_m2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="garages">
<h3><strong>Garages</strong><a class="headerlink" href="#garages" title="Permalink to this headline">#</a></h3>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;garages&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;50%&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>median</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>garages</th>
      <td>3,445.00</td>
      <td>0.71</td>
      <td>1.32</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>50.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_output-scroll tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;garages&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="p">})</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>garages</th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>10</th>
      <th>12</th>
      <th>20</th>
      <th>50</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1864</td>
      <td>991</td>
      <td>497</td>
      <td>31</td>
      <td>40</td>
      <td>6</td>
      <td>10</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Let’s inspect house with 50 garages:</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">large_garages_inst</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="n">house_df</span><span class="o">.</span><span class="n">garages</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">,</span> 
        <span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="s1">&#39;garages&#39;</span><span class="p">]</span>
    <span class="p">]</span>

<span class="n">large_garages_inst</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>url</th>
      <th>price_in_rp</th>
      <th>bedrooms</th>
      <th>land_size_m2</th>
      <th>building_size_m2</th>
      <th>floors</th>
      <th>garages</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2888</th>
      <td>https://www.rumah123.com/properti/tangerang/ho...</td>
      <td>55,000,000,000.00</td>
      <td>99</td>
      <td>1,150.00</td>
      <td>6,000.00</td>
      <td>4</td>
      <td>50</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Turns out that houses with large number of garages is the house with 50 bedrooms i.e. the <code class="docutils literal notranslate"><span class="pre">boarding</span> <span class="pre">house</span> </code>(<em>kost</em>), which explains the provided capacities for vehicle.</p>
</section>
</section>
<section id="zeroes-and-missing-records">
<h2>2.5. Zeroes and Missing Records<a class="headerlink" href="#zeroes-and-missing-records" title="Permalink to this headline">#</a></h2>
<section id="zeroes-records">
<h3><strong>Zeroes Records</strong><a class="headerlink" href="#zeroes-records" title="Permalink to this headline">#</a></h3>
<p>Records containing zero values are rather not ambiguous. For example, if <code class="docutils literal notranslate"><span class="pre">maid_bedrooms</span> <span class="pre">=</span> <span class="pre">0</span></code>, it explains that this house doesn’t provide bedroom for maid. Similar reasoning can safely be applied for other features, except for: <code class="docutils literal notranslate"><span class="pre">price</span> <span class="pre">in</span> <span class="pre">rp</span></code>, <code class="docutils literal notranslate"><span class="pre">lat</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">bedrooms</span></code>, <code class="docutils literal notranslate"><span class="pre">bathrooms</span></code>, <code class="docutils literal notranslate"><span class="pre">lands</span> <span class="pre">&amp;</span> <span class="pre">building</span> <span class="pre">size</span></code>, and <code class="docutils literal notranslate"><span class="pre">floors</span></code>.</p>
<p>Let’s explore proportion of zeroes records for each feature contains numerical data:</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">show_nans_or_zeroes</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">features</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">total_records</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;nans&#39;</span><span class="p">:</span>
        <span class="n">label_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">features</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">())</span>
    <span class="k">elif</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;zeroes&#39;</span><span class="p">:</span>
        <span class="n">label_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">features</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Wrong argument for &quot;label&quot;&#39;</span><span class="p">)</span>
    <span class="n">label_count</span> <span class="o">=</span> <span class="n">label_data</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">label_percent</span> <span class="o">=</span> <span class="n">label_data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="n">data_types</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">features</span><span class="p">]</span><span class="o">.</span><span class="n">dtypes</span>
    <span class="k">return</span><span class="p">(</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1"> Count&#39;</span><span class="o">.</span><span class="n">title</span><span class="p">():</span> <span class="n">label_count</span><span class="p">,</span> 
            <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1"> Percentage (%)&#39;</span><span class="o">.</span><span class="n">title</span><span class="p">():</span> <span class="n">label_percent</span><span class="p">,</span>
            <span class="s1">&#39;Data Types&#39;</span><span class="p">:</span> <span class="n">data_types</span>
        <span class="p">})</span>
    <span class="p">)</span>
<span class="n">numerical_features</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="n">house_df</span><span class="p">,</span> <span class="s1">&#39;zeroes&#39;</span><span class="p">,</span> <span class="n">numerical_features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Zeroes Count</th>
      <th>Zeroes Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price_in_rp</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>long</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>733</td>
      <td>21.28</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>2010</td>
      <td>58.35</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>2239</td>
      <td>64.99</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>building_age</th>
      <td>1011</td>
      <td>49.85</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>year_built</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>1864</td>
      <td>54.11</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>2471</td>
      <td>71.73</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>2197</td>
      <td>63.77</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>2066</td>
      <td>59.97</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>2531</td>
      <td>73.47</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>2446</td>
      <td>71.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>420</td>
      <td>12.19</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>2450</td>
      <td>71.12</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>2974</td>
      <td>86.33</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>2718</td>
      <td>78.90</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>2994</td>
      <td>86.91</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>2996</td>
      <td>86.97</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>2721</td>
      <td>78.98</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>2113</td>
      <td>61.34</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>3226</td>
      <td>93.64</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>3266</td>
      <td>94.80</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>3386</td>
      <td>98.29</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>3311</td>
      <td>96.11</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>3287</td>
      <td>95.41</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>3293</td>
      <td>95.59</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>3367</td>
      <td>97.74</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>3264</td>
      <td>94.75</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>3336</td>
      <td>96.84</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>484</td>
      <td>14.05</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>3288</td>
      <td>95.44</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>3441</td>
      <td>99.88</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>3442</td>
      <td>99.91</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>3444</td>
      <td>99.97</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>3443</td>
      <td>99.94</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>3444</td>
      <td>99.97</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>3444</td>
      <td>99.97</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>3444</td>
      <td>99.97</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>3444</td>
      <td>99.97</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>3443</td>
      <td>99.94</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>3440</td>
      <td>99.85</td>
      <td>Int64</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Fortunately, primary characteristics of the house don’t contain zeroes.</p>
<p>There are some facilities that has a large portion of zeroes record. Analysis that presented in the next chapter will prove how significant those facilities</p>
</section>
<section id="missing-records">
<h3><strong>Missing Records</strong><a class="headerlink" href="#missing-records" title="Permalink to this headline">#</a></h3>
<p>Let’s fist explore missing records for numerical features.</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="n">house_df</span><span class="p">,</span> <span class="s1">&#39;nans&#39;</span><span class="p">,</span> <span class="n">numerical_features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price_in_rp</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>long</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>32</td>
      <td>0.93</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>28</td>
      <td>0.81</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>2</td>
      <td>0.06</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>2</td>
      <td>0.06</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>6</td>
      <td>0.17</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>building_age</th>
      <td>1417</td>
      <td>41.13</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>year_built</th>
      <td>1417</td>
      <td>41.13</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>285</td>
      <td>8.27</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Almost half of the dataset contains observations with missing <code class="docutils literal notranslate"><span class="pre">building_age</span></code>, so <strong>deducting analysis from this features is not appropriate hence will not be performed</strong>.</p>
<p>For other features with missing records, it is safe to ignore those observations for now since they only cover less than 1% of total rows in the dataset. But for developing <code class="docutils literal notranslate"><span class="pre">regression</span> <span class="pre">model</span></code>, particular features will be imputed accordingly.</p>
<p>For categorical and string features:</p>
<div class="cell tag_output-scroll tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">non_numeric_features</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="n">house_df</span><span class="p">,</span> <span class="s1">&#39;nans&#39;</span><span class="p">,</span> <span class="n">non_numeric_features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>url</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>title</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>address</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>district</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>city</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>facilities</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>property_type</th>
      <td>1</td>
      <td>0.03</td>
      <td>category</td>
    </tr>
    <tr>
      <th>ads_id</th>
      <td>4</td>
      <td>0.12</td>
      <td>object</td>
    </tr>
    <tr>
      <th>certificate</th>
      <td>140</td>
      <td>4.06</td>
      <td>category</td>
    </tr>
    <tr>
      <th>electricity</th>
      <td>0</td>
      <td>0.00</td>
      <td>category</td>
    </tr>
    <tr>
      <th>property_condition</th>
      <td>242</td>
      <td>7.02</td>
      <td>category</td>
    </tr>
    <tr>
      <th>building_orientation</th>
      <td>1591</td>
      <td>46.18</td>
      <td>category</td>
    </tr>
    <tr>
      <th>furnishing</th>
      <td>372</td>
      <td>10.80</td>
      <td>category</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Other than <code class="docutils literal notranslate"><span class="pre">building_orientation</span></code>, those features suffers from zero to slightly missing records.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="data-exploration">
<h1>3. Data Exploration<a class="headerlink" href="#data-exploration" title="Permalink to this headline">#</a></h1>
<section id="median-statistics-of-house-price">
<h2>3.1. Median Statistics of House Price<a class="headerlink" href="#median-statistics-of-house-price" title="Permalink to this headline">#</a></h2>
<p>Due to the presence of right-skewness in our dataset, it is best to use <code class="docutils literal notranslate"><span class="pre">median</span></code> to represent typical house price as the center of price distribution, since the <code class="docutils literal notranslate"><span class="pre">mean</span></code> statistic will be inflated by expensive house.</p>
<p>Recall the <code class="docutils literal notranslate"><span class="pre">price_in_rp</span></code> distribution presented in previous chart is clearly not informative because the distribution is heavily skewed. We will apply <code class="docutils literal notranslate"><span class="pre">log-scale</span></code> to the chart axis to enhance the information presented.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median</span> <span class="o">=</span> <span class="n">house_df</span><span class="p">[</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
    <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">ecdfplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;House Price Histogram&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">5e7</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.52</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Proportion = 0.5,</span><span class="se">\n</span><span class="s1">Median=</span><span class="si">{</span><span class="n">median</span><span class="si">:</span><span class="s1">,.0f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Empirical Cumulative Density Function&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;House Price, in IDR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_96_0.png" src="_images/2 - Data Exploration and Analysis_96_0.png" />
</div>
</div>
<p>Note that the right-skewness also clearly visible even after <code class="docutils literal notranslate"><span class="pre">log-scaling</span></code> the axis.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">median</span></code> price of overall dataset, which represents <code class="docutils literal notranslate"><span class="pre">Jabodetabek</span> <span class="pre">House</span> <span class="pre">Price</span></code>, is located at <code class="docutils literal notranslate"><span class="pre">Rp.</span> <span class="pre">1,500,000,000</span> <span class="pre">(1.5</span> <span class="pre">billions</span> <span class="pre">rupiahs)</span></code>.</p>
<p>Now let’s distinguish median prices between each Jabodetabek area.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df_simple</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">house_df_simple</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df_simple</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Jakarta&#39;</span><span class="p">),</span> <span class="s1">&#39;city&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; DKI Jakarta&#39;</span>
<span class="n">median</span> <span class="o">=</span> <span class="n">house_df_simple</span><span class="p">[[</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span>\
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>\
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># plot_order = list(median.sort_values(&#39;price_in_rp&#39;, ascending=False).city)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">median</span><span class="p">)</span>
<span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">median</span><span class="o">.</span><span class="n">price_in_rp</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Rp. </span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">,.0f</span><span class="si">}</span><span class="s1"> &#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Jabodetabek House Price, Median&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;House Price, IDR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;City&#39;</span><span class="p">)</span>
<span class="n">current_xticks</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">()[</span><span class="mi">0</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">current_xticks</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">current_xticks</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_98_0.png" src="_images/2 - Data Exploration and Analysis_98_0.png" />
</div>
</div>
<p>DKI Jakarta has the largest median price among others. The median house price between <code class="docutils literal notranslate"><span class="pre">Bogor,</span> <span class="pre">Depok,</span> <span class="pre">and</span> <span class="pre">Bekasi</span></code> is generally typical.</p>
<p>Identifying median statistics alone is not sufficient enough to figure out typical range of house price, thus we also need to inspect the house price distribution.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">house_df_simple</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span>
    <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">ecdfplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">house_df_simple</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> 
    <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;House Price Historgram&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">1e8</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.52</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Proportion = 0.5&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Empirical Cumulative Density Function&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;House Price, in IDR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_100_0.png" src="_images/2 - Data Exploration and Analysis_100_0.png" />
</div>
</div>
<p>Turns out that the distribution between <code class="docutils literal notranslate"><span class="pre">Bogor,</span> <span class="pre">Depok,</span> <span class="pre">and</span> <span class="pre">Bekasi</span></code> is also typical. However, <code class="docutils literal notranslate"><span class="pre">Bogor</span></code> is more right-skewed among them, possibly suggesting that there are <strong>some areas in</strong> <code class="docutils literal notranslate"><span class="pre">Bogor</span></code> <strong>that has a significantly higher price</strong> than their typical price range.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">lat-long</span></code> data can be utilized to show distribution of Jabodetabek house price on an interesting cartographical chart, as below:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_df</span> <span class="o">=</span> \
    <span class="n">house_df</span>\
        <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;district&#39;</span><span class="p">)</span>\
        <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">median_price</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">),</span> 
             <span class="n">unit_count</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">),</span>
             <span class="n">median_size</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span>
            <span class="p">)</span>\
        <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>\
        <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;district&#39;</span><span class="p">,</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;long&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;district&#39;</span><span class="p">]),</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;district&#39;</span><span class="p">)</span>\
        <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span>
<span class="n">hover_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;district&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;long&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;median_price&#39;</span><span class="p">:</span> <span class="s1">&#39;:,.0f&#39;</span><span class="p">,</span>
    <span class="s1">&#39;median_size&#39;</span><span class="p">:</span> <span class="s1">&#39;:,.0f&#39;</span><span class="p">,</span>
    <span class="s1">&#39;unit_count&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">}</span>    
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter_mapbox</span><span class="p">(</span>
    <span class="n">median_df</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="s1">&#39;long&#39;</span><span class="p">,</span> 
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">median_df</span><span class="o">.</span><span class="n">median_price</span> <span class="o">/</span> <span class="mf">10e3</span><span class="p">),</span>
    <span class="n">hover_data</span><span class="o">=</span><span class="n">hover_data</span><span class="p">,</span> <span class="n">hover_name</span><span class="o">=</span><span class="s1">&#39;district&#39;</span><span class="p">,</span> 
    <span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Jabodetabek House Price Map&#39;</span><span class="p">,</span>
    <span class="n">mapbox_style</span><span class="o">=</span><span class="s2">&quot;carto-darkmatter&quot;</span><span class="p">,</span>            
    <span class="n">autosize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">hovermode</span><span class="o">=</span><span class="s1">&#39;closest&#39;</span><span class="p">,</span> 
    <span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="s1">&#39;iframe&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><iframe
    scrolling="no"
    width="100%"
    height="545px"
    src="iframe_figures/figure_55.html"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">median</span></code> statistics is applied for each <code class="docutils literal notranslate"><span class="pre">district</span> <span class="pre">in</span> <span class="pre">Jabodetabek</span></code> which determine the bubbles size. The unit count is also associated in the bubbles which become visible by hovering the cursor over the buble.</p>
<ul class="simple">
<li><p>DKI Jakarta has most larger bubbles among other city.</p></li>
<li><p>Note that some districts in <code class="docutils literal notranslate"><span class="pre">Bogor</span></code> has larger bubbles than most of <code class="docutils literal notranslate"><span class="pre">Depok,</span> <span class="pre">Bekasi</span></code> bubbles, reinforcing our previous insight.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Utara</span></code> area, most of the observations unfortunately only presented for areas, which most <em>‘Jakartans’</em> known, as some of the <em>most elite housing area</em> that DKI Jakarta currently has. This will possibly create a biased representation of <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Utara</span></code> House price. We found a limitation in our dataset, so I will acknowledge this finding on every important aspect of our analysis.</p></li>
</ul>
<section id="dki-jakarta-house-price">
<h3><strong>DKI Jakarta House Price</strong><a class="headerlink" href="#dki-jakarta-house-price" title="Permalink to this headline">#</a></h3>
<p>Now let’s distinguish median price among DKI Jakarta.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">house_df_jakarta</span> <span class="o">=</span> <span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Jakarta&#39;</span><span class="p">)]</span>
<span class="n">median</span> <span class="o">=</span> <span class="n">house_df_jakarta</span><span class="p">[[</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span>\
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>\
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">median</span><span class="p">)</span>
<span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">median</span><span class="o">.</span><span class="n">price_in_rp</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Rp. </span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">,.0f</span><span class="si">}</span><span class="s1"> &#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;DKI Jakarta House Price, Median&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;House Price, IDR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;City&#39;</span><span class="p">)</span>
<span class="n">current_xticks</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">()[</span><span class="mi">0</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">current_xticks</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">current_xticks</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_106_0.png" src="_images/2 - Data Exploration and Analysis_106_0.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Utara</span></code> has the largest median price. <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Timur</span></code> has the lowest median and rather close to <code class="docutils literal notranslate"><span class="pre">Bogor,</span> <span class="pre">Depok</span> <span class="pre">and</span> <span class="pre">Bekasi</span></code>.</p>
<p>Recall that Jakarta Utara suggest imbalanced proportion of the records, and may also be presents to other city in DKI Jakarta. Let’s inspect their records’ proportion.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">house_df_jakarta</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">autopct</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%.2f</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Percentage of Proportion, DKI Jakarta Observations&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_108_0.png" src="_images/2 - Data Exploration and Analysis_108_0.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Utara</span></code> is indeed has a small proportion. However, <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Pusat</span></code> and <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Timur</span></code> has somewhat much smaller portion of dataset. Let’s further inspect their distribution:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">house_df_jakarta</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span>
    <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">ecdfplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">house_df_jakarta</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> 
    <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;House Price Historgram, DKI Jakarta&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">5e8</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.52</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Proportion = 0.5&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Empirical Cumulative Density Function, DKI Jakarta&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;House Price, in IDR&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_110_0.png" src="_images/2 - Data Exploration and Analysis_110_0.png" />
</div>
</div>
<p>We can see the <code class="docutils literal notranslate"><span class="pre">uniform-like</span></code> distribution of the <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Pusat</span></code> house price is somewhat not a commonly-known type of house price distribution. The <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Pusat</span></code> observations is lacking coverage to represent distribution of <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Pusat</span> <span class="pre">House</span> <span class="pre">Price</span> <span class="pre">Population</span></code>.</p>
<p>Thus the limitations of DKI Jakarta observations are concluded as:</p>
<ol class="simple">
<li><p>Lack of coverage for <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Pusat</span></code>, <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Timur</span></code>, and <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Utara</span></code> leads to somewhat inappropriate analysis or justification that involve those city.</p></li>
<li><p>Further analysis of those city is deemed appropriate if more data can be retrieved, followed by thorough common justification of coverage until deemed representative enough of true population.</p></li>
</ol>
<p>However, to maximize the scope of this analysis, we will still consider all of the DKI Jakarta cities other than <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Pusat</span></code> if proven to be statistically significant, since their distributions are somewhat logically acceptable. Note that above limitations will be acknowledged if necessary.</p>
</section>
<section id="inference-about-jabodetabek-median-house-price">
<h3><strong>Inference about Jabodetabek Median House Price</strong><a class="headerlink" href="#inference-about-jabodetabek-median-house-price" title="Permalink to this headline">#</a></h3>
<p>To analyze precision and realibility of our median statistic, we are going to determine interval of estimate in form of <code class="docutils literal notranslate"><span class="pre">confidence</span> <span class="pre">interval</span></code>, which explains range of sensible value of population estimate based on our data to infer how close it might be to the true median.</p>
<p>Information about the precision of an interval estimate is conveyed by the width of the interval:</p>
<ul class="simple">
<li><p>High confidence level followed by quite narrow interval suggest that dataset gives the reasonable precise knowledge of the parameter</p></li>
<li><p>Wide confidence interval suggest that there is a great deal of uncertainty regarding the estimated value</p></li>
</ul>
<p>First let’s recall our <code class="docutils literal notranslate"><span class="pre">price_in_rp</span></code> variable statistics as below:</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">house_df</span><span class="p">[[</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;50%&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>median</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price_in_rp</th>
      <td>3,445.00</td>
      <td>4,034,482,148.04</td>
      <td>9,872,656,878.52</td>
      <td>125,000,000.00</td>
      <td>1,500,000,000.00</td>
      <td>250,000,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>To determine confidence interval of <code class="docutils literal notranslate"><span class="pre">median</span></code> statistics, there are some available <code class="docutils literal notranslate"><span class="pre">non-parametric</span> <span class="pre">methods</span></code> that we can use, which known robust enough to estimate the interval estimate of median. In this analysis, we will consider:</p>
<ol class="simple">
<li><p>Maritz-Jarett estimator (will be shorten as <code class="docutils literal notranslate"><span class="pre">mj</span></code>)</p></li>
<li><p>Hettmansperger-Sheather interpolation (will be shorten as <code class="docutils literal notranslate"><span class="pre">hs</span></code>)</p></li>
<li><p>Bootstrapping the median from dataset</p></li>
</ol>
<p>The <code class="docutils literal notranslate"><span class="pre">hs</span></code> will be based on interpolation of the sorted observations in the dataset so the interval value must be one observation that included in the dataset.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">bootstrap</span></code> confidence interval based on the <code class="docutils literal notranslate"><span class="pre">bootstrap</span> <span class="pre">distribution</span></code> if we were to draw repeatedly from the sample, trying to represents what the user knows about the underlying popoulation. The realibility of the <code class="docutils literal notranslate"><span class="pre">bootstrap</span></code> is influenced by how closely the original sample represents the whole distribution.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mj</span></code> method will use estimated quantile standard error so the value may be not what as included in the dataset.</p>
<p>Let’s determine the interval for each of the method above based on <code class="docutils literal notranslate"><span class="pre">95%</span> <span class="pre">confidence</span> <span class="pre">level</span></code>:</p>
<div class="cell tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">price_in_rp</span><span class="p">)</span>
<span class="n">price_data</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">price_in_rp</span><span class="o">.</span><span class="n">values</span>
<span class="n">median_ci_mj</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nb">float</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span> <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">mquantiles_cimj</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">price_data</span><span class="p">,</span>
        <span class="n">prob</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">],</span>
        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
    <span class="p">]</span>
<span class="n">median_ci_hs</span> <span class="o">=</span> <span class="n">median_cihs</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">price_data</span><span class="p">,</span>
        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span>
        <span class="p">)</span>
<span class="n">median_ci_bootstrap</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nb">float</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span> <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">bootstrap</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="p">(</span><span class="n">price_data</span><span class="p">,</span> <span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;percentile&#39;</span><span class="p">,</span>
        <span class="n">statistic</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">99</span><span class="p">)</span><span class="o">.</span><span class="n">confidence_interval</span>
    <span class="p">]</span>
<span class="n">median_ci</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">:</span><span class="n">median</span><span class="p">,</span> <span class="s1">&#39;ci_lower&#39;</span><span class="p">:</span> <span class="n">ci</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;ci_upper&#39;</span><span class="p">:</span> <span class="n">ci</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>\
        <span class="k">for</span> <span class="n">method</span><span class="p">,</span> <span class="n">median</span><span class="p">,</span> <span class="n">ci</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">&#39;Maritz-Jarrett&#39;</span><span class="p">,</span> <span class="s1">&#39;Hetmasperger-Sheather&#39;</span><span class="p">,</span> <span class="s1">&#39;Bootstrap CI&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">median</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
            <span class="p">[</span><span class="n">median_ci_mj</span><span class="p">,</span> <span class="n">median_ci_hs</span><span class="p">,</span> <span class="n">median_ci_bootstrap</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="p">]</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">median_ci</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>method</th>
      <th>median</th>
      <th>ci_lower</th>
      <th>ci_upper</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Maritz-Jarrett</td>
      <td>1,500,000,000.00</td>
      <td>1,436,204,280.83</td>
      <td>1,563,795,719.17</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Hetmasperger-Sheather</td>
      <td>1,500,000,000.00</td>
      <td>1,450,000,000.00</td>
      <td>1,590,000,000.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Bootstrap CI</td>
      <td>1,500,000,000.00</td>
      <td>1,450,000,000.00</td>
      <td>1,590,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>To generalize above results, we can say that, using our dataset to infer about Jabodetabek House Price:</p>
<p><em><strong>“With 95% confidence level, based on provided dataset, the median estimate of Jabodetabek House Price is 1,500,000 rupiahs with margin of error no more than +- 90,000,000 rupiahs”</strong></em>.</p>
<p>The error is quite low, less than 10% of our estimate.</p>
</section>
<section id="testing-the-realibility-of-interval-estimate">
<h3><strong>Testing the Realibility of Interval Estimate</strong><a class="headerlink" href="#testing-the-realibility-of-interval-estimate" title="Permalink to this headline">#</a></h3>
<p>How can we assure that the method to determine the confidence interval is robust enough for our dataset? We can simulate the <code class="docutils literal notranslate"><span class="pre">coverage</span> <span class="pre">probability</span></code> of interval estimate. <code class="docutils literal notranslate"><span class="pre">Coverage</span> <span class="pre">Probability</span></code> shows that, if samples is being taken from the population repeatedly, then of all samples, what is the probability of the <code class="docutils literal notranslate"><span class="pre">confidence</span> <span class="pre">interval</span></code> determined by those samples contains true statistic of population.</p>
<p>To simulate the <code class="docutils literal notranslate"><span class="pre">coverage</span> <span class="pre">probability</span></code>:</p>
<ol class="simple">
<li><p>Take <em>n samples</em> repeatedly from a population. Most of the time we don’t know the true value of statistics of that population. By forming a <code class="docutils literal notranslate"><span class="pre">theoretical</span> <span class="pre">population</span></code>, we then able “know”, for example, the median of a population.</p></li>
<li><p>The coverage probability is then:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\frac{number\;of\;occasions\;true\;median\;inside\;interval}{n\;samples}\]</div>
<p>We will approach our population distribution by using <code class="docutils literal notranslate"><span class="pre">theoretical</span> <span class="pre">distribution</span></code> that mimics our dataset charateristics. Therefore, <code class="docutils literal notranslate"><span class="pre">Theoretical</span> <span class="pre">Distribution</span></code> will estimated from our dataset using <code class="docutils literal notranslate"><span class="pre">Gaussian</span> <span class="pre">KDE</span></code> method as follows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">gaussian_kde</span>

<span class="n">density</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">price_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>After we <code class="docutils literal notranslate"><span class="pre">estimated</span></code> the theoretical distribution, we can determine the <code class="docutils literal notranslate"><span class="pre">true</span> <span class="pre">median</span></code> of that distribution. We know that median is <code class="docutils literal notranslate"><span class="pre">50%</span> <span class="pre">percentile</span></code> of a distribution, we will utilize <code class="docutils literal notranslate"><span class="pre">scipy</span> <span class="pre">optimization</span> <span class="pre">program</span></code> to calculate its 50% percentile.</p>
<p>I utilize <code class="docutils literal notranslate"><span class="pre">secant</span></code>, which is iterative method of <code class="docutils literal notranslate"><span class="pre">root_scalar</span></code> solver to find the root of a function. Using iterative method, we don’t need to know the derivative of the function to solve.</p>
<p>The 50% percentile is <em>CDF = 50%</em> of our distribution, so I create a <em>scalar function</em> (function that returns a scalar) then find the root of that function.</p>
<p>Given</p>
<div class="math notranslate nohighlight">
\[x=random\;variable\]</div>
<p>which in our case, the rvs is <code class="docutils literal notranslate"><span class="pre">price_in_rp</span></code>, then</p>
<div class="math notranslate nohighlight">
\[x\;is\;median,\;if\;F(x)=0.5\]</div>
<p><span class="math notranslate nohighlight">\(F(x)\)</span> is CDF function of the theoretical distribution. To find <em>x</em> that serve as the median of distribution, we just need to find the root of:</p>
<div class="math notranslate nohighlight">
\[F(x) - 0.5 = 0\]</div>
<p>Below codes interpret above concept:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">root_scalar</span>

<span class="k">def</span> <span class="nf">get_cdf</span><span class="p">(</span><span class="n">upper_bound</span><span class="p">):</span>
    <span class="n">density</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="n">price_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">density</span><span class="o">.</span><span class="n">integrate_box</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span>

<span class="n">solver</span> <span class="o">=</span> <span class="n">root_scalar</span><span class="p">(</span><span class="n">get_cdf</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;secant&#39;</span><span class="p">,</span>  <span class="n">xtol</span><span class="o">=</span><span class="mf">10e-5</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mi">1500000000</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="mi">1600000000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Median: Rp. </span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solver</span><span class="o">.</span><span class="n">root</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Median: Rp. 2,145,251,456.29
</pre></div>
</div>
</div>
</div>
<p>We don’t need to worry about the median of theoretical distribution differs from our original dataset, since the accuracy of estimated distribution is out of our interest. Theoretical distribution is only used for drawing samples repeatedly, serves as a distribution that <em>mimics</em> our population characteristics.</p>
<p>Below codes <code class="docutils literal notranslate"><span class="pre">simulate</span> <span class="pre">the</span> <span class="pre">sample</span> <span class="pre">draws</span></code> then calculate the coverage probability, using various number of observations that each sample has (various sample size).</p>
<p>Using below codes, we demonstrate <code class="docutils literal notranslate"><span class="pre">taking</span> <span class="pre">samples</span> <span class="pre">repeatedly</span> <span class="pre">about</span> <span class="pre">1000</span> <span class="pre">times</span></code>. The robust method will gives value near <code class="docutils literal notranslate"><span class="pre">nominal</span> <span class="pre">confidence</span> <span class="pre">interval</span></code>, which is set to 95% in this analysis.</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CoverageProba</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">n_sample</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataset</span> <span class="o">=</span> <span class="n">dataset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_sample</span> <span class="o">=</span> <span class="n">n_sample</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_density</span> <span class="o">=</span> <span class="n">gaussian_kde</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_median</span> <span class="o">=</span> <span class="n">root_scalar</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_cdf</span><span class="p">,</span> 
            <span class="n">method</span><span class="o">=</span><span class="s1">&#39;secant&#39;</span><span class="p">,</span>  <span class="n">xtol</span><span class="o">=</span><span class="mf">10e-5</span><span class="p">,</span> 
            <span class="n">x0</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mf">0.25</span><span class="p">),</span> 
            <span class="n">x1</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataset</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proba_mj</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proba_hs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proba_bootstrap</span> <span class="o">=</span> <span class="p">[]</span>
        
    <span class="k">def</span> <span class="nf">_get_cdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_density</span><span class="o">.</span><span class="n">integrate_box</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_median_ci_mj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_sample</span><span class="p">):</span> <span class="c1"># dataset in np.array</span>
        <span class="n">n_sample_</span> <span class="o">=</span> <span class="n">n_sample</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_density</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">n_sample_</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ci_l</span><span class="p">,</span> <span class="n">ci_h</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span> <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">mquantiles_cimj</span><span class="p">(</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
                    <span class="n">prob</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">],</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span><span class="p">)</span>
                    <span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_median</span> <span class="o">&gt;=</span> <span class="n">ci_l</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_median</span> <span class="o">&lt;=</span> <span class="n">ci_h</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">_median_ci_hs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_sample</span><span class="p">):</span>
        <span class="n">n_sample_</span> <span class="o">=</span> <span class="n">n_sample</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_density</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">n_sample_</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ci_l</span><span class="p">,</span> <span class="n">ci_h</span> <span class="o">=</span>  <span class="n">median_cihs</span><span class="p">(</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
                    <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span>
                    <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_median</span> <span class="o">&gt;=</span> <span class="n">ci_l</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_median</span> <span class="o">&lt;=</span> <span class="n">ci_h</span><span class="p">)</span>        
    
    <span class="k">def</span> <span class="nf">_median_ci_bootstrap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_sample</span><span class="p">):</span>
        <span class="n">n_sample_</span> <span class="o">=</span> <span class="n">n_sample</span>
        <span class="n">sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_density</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">n_sample_</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ci_l</span><span class="p">,</span> <span class="n">ci_h</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span> <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">bootstrap</span><span class="p">(</span>
                    <span class="n">data</span><span class="o">=</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;percentile&#39;</span><span class="p">,</span>
                    <span class="n">statistic</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span><span class="o">.</span><span class="n">confidence_interval</span>
                    <span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_median</span> <span class="o">&gt;=</span> <span class="n">ci_l</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_median</span> <span class="o">&lt;=</span> <span class="n">ci_h</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_proba</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_iterate</span><span class="p">):</span>
        <span class="n">n_iterate_</span> <span class="o">=</span> <span class="n">n_iterate</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_sample</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">n_iterate_</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">ci_mj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_median_ci_mj</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_proba_mj</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">ci_mj</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_iterate_</span><span class="p">)</span>
            <span class="n">ci_hs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_median_ci_hs</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_proba_hs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">ci_hs</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_iterate_</span><span class="p">))</span>
            <span class="n">ci_bootstrap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_median_ci_bootstrap</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_proba_bootstrap</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">ci_bootstrap</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_iterate_</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="p">{</span><span class="s1">&#39;sample_sizes&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_sample</span><span class="p">,</span>
                <span class="s1">&#39;coverage_probability_mj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proba_mj</span><span class="p">,</span>
                <span class="s1">&#39;coverage_probability_hs&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proba_hs</span><span class="p">,</span>
                <span class="s1">&#39;coverage_probability_bootstrap&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proba_bootstrap</span>
                <span class="p">}</span>
                <span class="p">)</span>
         <span class="p">)</span>
        
<span class="n">coverage</span> <span class="o">=</span> <span class="n">CoverageProba</span><span class="p">(</span>
    <span class="n">dataset</span><span class="o">=</span><span class="n">price_data</span><span class="p">,</span> 
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> 
    <span class="n">n_sample</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">]</span>
    <span class="p">)</span>
<span class="n">ci_coverage</span> <span class="o">=</span> <span class="n">coverage</span><span class="o">.</span><span class="n">get_proba</span><span class="p">(</span><span class="n">n_iterate</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="n">ci_coverage</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sample_sizes</th>
      <th>coverage_probability_mj</th>
      <th>coverage_probability_hs</th>
      <th>coverage_probability_bootstrap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>0.97</td>
      <td>0.94</td>
      <td>0.95</td>
    </tr>
    <tr>
      <th>1</th>
      <td>50</td>
      <td>0.95</td>
      <td>0.94</td>
      <td>0.94</td>
    </tr>
    <tr>
      <th>2</th>
      <td>100</td>
      <td>0.94</td>
      <td>0.95</td>
      <td>0.95</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1000</td>
      <td>0.94</td>
      <td>0.95</td>
      <td>0.95</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2000</td>
      <td>0.95</td>
      <td>0.95</td>
      <td>0.96</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>From result above, it seems that <code class="docutils literal notranslate"><span class="pre">mj</span></code> overestimate the confidence interval at lower sample size. Method <code class="docutils literal notranslate"><span class="pre">hs</span></code> and <code class="docutils literal notranslate"><span class="pre">bootstrap</span></code> gives similar results for large sample size.</p>
<p>Let’s further inspect each of the values along several sample sizes in figure below:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ci_coverage_melt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">ci_coverage</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">id_vars</span><span class="o">=</span><span class="s1">&#39;sample_sizes&#39;</span><span class="p">,</span> 
    <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;coverage_probability_mj&#39;</span><span class="p">,</span> <span class="s1">&#39;coverage_probability_hs&#39;</span><span class="p">,</span> <span class="s1">&#39;coverage_probability_bootstrap&#39;</span><span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;ci_method&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;coverage_probability&#39;</span>
    <span class="p">)</span>
<span class="c1"># plot coverage probability</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">ci_coverage_melt</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;sample_sizes&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;coverage_probability&#39;</span><span class="p">,</span> 
        <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;ci_method&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax_</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sample Size&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Coverage Probability&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Coverage Probability of Several Median CI Method&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.axis.YTick at 0x27686209940&gt;,
 &lt;matplotlib.axis.YTick at 0x27686209250&gt;,
 &lt;matplotlib.axis.YTick at 0x276862b1130&gt;,
 &lt;matplotlib.axis.YTick at 0x276862a2f70&gt;,
 &lt;matplotlib.axis.YTick at 0x276862b7490&gt;]
</pre></div>
</div>
<img alt="_images/2 - Data Exploration and Analysis_126_1.png" src="_images/2 - Data Exploration and Analysis_126_1.png" />
</div>
</div>
<p>We will use <code class="docutils literal notranslate"><span class="pre">hs</span></code> to determine interval estimate of median price, since <code class="docutils literal notranslate"><span class="pre">bootstrap</span></code> involves more computation.</p>
<p>For Jabodetabek house price:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">median_ci_hs</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">):</span>
    <span class="n">ci_l</span><span class="p">,</span> <span class="n">ci_h</span> <span class="o">=</span> <span class="n">median_cihs</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">array</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span>
            <span class="p">)</span>
    <span class="k">if</span> <span class="n">output</span> <span class="o">==</span><span class="s1">&#39;lower&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ci_l</span>
    <span class="k">return</span> <span class="n">ci_h</span>

<span class="k">def</span> <span class="nf">get_ci_df</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df_</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">df_</span><span class="p">[[</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span>\
        <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span>\
        <span class="o">.</span><span class="n">aggregate</span><span class="p">(</span>
            <span class="n">median</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">NamedAgg</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">),</span>
            <span class="n">ci_lower</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">NamedAgg</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">median_ci_hs</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)),</span>
            <span class="n">ci_upper</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">NamedAgg</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">median_ci_hs</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>\
        <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>\
        <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;median&#39;</span><span class="p">)</span>
        <span class="p">)</span>

<span class="n">house_df_simple</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">house_df_simple</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">house_df_simple</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Jakarta&#39;</span><span class="p">),</span> <span class="s1">&#39;city&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; DKI Jakarta&#39;</span>  
<span class="n">median_ci_jabodetabek</span> <span class="o">=</span> <span class="n">get_ci_df</span><span class="p">(</span><span class="n">house_df_simple</span><span class="p">)</span>

<span class="n">median_ci_jabodetabek</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>city</th>
      <th>median</th>
      <th>ci_lower</th>
      <th>ci_upper</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bekasi</td>
      <td>975,000,000.00</td>
      <td>920,000,000.00</td>
      <td>1,050,000,000.00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Depok</td>
      <td>995,000,000.00</td>
      <td>945,000,000.00</td>
      <td>1,070,686,822.87</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bogor</td>
      <td>1,200,000,000.00</td>
      <td>1,090,403,259.36</td>
      <td>1,350,000,000.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Tangerang</td>
      <td>2,395,000,000.00</td>
      <td>2,154,472,505.05</td>
      <td>2,600,000,000.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>DKI Jakarta</td>
      <td>4,500,000,000.00</td>
      <td>4,000,000,000.00</td>
      <td>4,950,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_ci</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">city</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_lower</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_upper</span><span class="p">)</span>
    <span class="n">y_ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">())</span>
    <span class="n">x_ticks</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span>
    <span class="n">x_ticks</span> <span class="o">=</span> <span class="n">x_ticks</span><span class="o">.</span><span class="n">copy</span><span class="p">()[</span><span class="n">x_ticks</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_lower</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">-</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)),</span> <span class="n">ymax</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_upper</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">-</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)),</span> <span class="n">ymax</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;median&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">city</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x_ticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xtick</span><span class="p">)</span> <span class="k">for</span> <span class="n">xtick</span> <span class="ow">in</span> <span class="n">x_ticks</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;95% Confidence Interval of Median Price, </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Median Price, in Rupiah&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;City&#39;</span><span class="p">)</span>

<span class="n">plot_ci</span><span class="p">(</span><span class="n">median_ci_jabodetabek</span><span class="p">,</span> <span class="s1">&#39;Jabodetabek&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_129_0.png" src="_images/2 - Data Exploration and Analysis_129_0.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DKI</span> <span class="pre">Jakarta</span></code> has larger interval range above any other city. We have slightly higher confidence in our analysis for <code class="docutils literal notranslate"><span class="pre">Bogor</span></code>, <code class="docutils literal notranslate"><span class="pre">Depok</span></code>, <code class="docutils literal notranslate"><span class="pre">Bekasi</span></code> since they have narrow interval range.</p>
<p>Now let’s inspect DKI Jakarta interval estimate:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">median_ci_jakarta</span> <span class="o">=</span> <span class="n">get_ci_df</span><span class="p">(</span><span class="n">house_df_jakarta</span><span class="p">)</span>
<span class="n">median_ci_jakarta</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>city</th>
      <th>median</th>
      <th>ci_lower</th>
      <th>ci_upper</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>Jakarta Timur</td>
      <td>1,550,000,000.00</td>
      <td>1,123,907,782.14</td>
      <td>2,036,207,490.18</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Jakarta Barat</td>
      <td>3,300,000,000.00</td>
      <td>2,871,827,173.85</td>
      <td>3,728,172,826.15</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jakarta Pusat</td>
      <td>5,800,000,000.00</td>
      <td>812,627,444.89</td>
      <td>17,500,000,000.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Jakarta Selatan</td>
      <td>8,500,000,000.00</td>
      <td>6,250,000,000.00</td>
      <td>10,687,341,965.65</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Jakarta Utara</td>
      <td>10,000,000,000.00</td>
      <td>7,535,086,312.49</td>
      <td>11,824,568,437.56</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">plot_ci</span><span class="p">(</span><span class="n">median_ci_jakarta</span><span class="p">,</span> <span class="s1">&#39;Jakarta&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_132_0.png" src="_images/2 - Data Exploration and Analysis_132_0.png" />
</div>
</div>
<p>As we can see, there is a lot of uncertainty regarding house price of <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">pusat</span></code>, further reinforcing our previous knowledge about lack of coverage for <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Pusat</span></code> from our dataset.</p>
</section>
</section>
<section id="house-price-according-to-certificate-type">
<h2>3.2. House Price according to Certificate Type<a class="headerlink" href="#house-price-according-to-certificate-type" title="Permalink to this headline">#</a></h2>
<p>In this section, we will analyze house price according to its <code class="docutils literal notranslate"><span class="pre">certificate</span></code> type. We will investigate if homeowner believe that specific certificate type increases their house value.</p>
<p>First, we will look at the distribution of price according to specific house certificates.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;certificate&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;certificate&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">ax_</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">ticks</span><span class="p">[</span><span class="n">ticks</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xtick</span><span class="p">)</span> <span class="k">for</span> <span class="n">xtick</span> <span class="ow">in</span> <span class="n">xticks</span><span class="p">])</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Price in Rupiah&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Certificate Type&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_136_0.png" src="_images/2 - Data Exploration and Analysis_136_0.png" />
</div>
</div>
<p>Y-axis ticks on above figure is sorted according to our common believe on how valuable each certificate is: <code class="docutils literal notranslate"><span class="pre">shm</span> <span class="pre">-</span> <span class="pre">sertifikat</span> <span class="pre">hak</span> <span class="pre">milik</span></code> legal-wise is generally the most valuable among the others, down to <code class="docutils literal notranslate"><span class="pre">ppjb,</span> <span class="pre">girik,</span> <span class="pre">adat,</span> <span class="pre">dll</span></code>.</p>
<p>We will develop statistical test based on confidence interval of <code class="docutils literal notranslate"><span class="pre">median</span> <span class="pre">difference</span></code> statistic, multiple tested between each of the certificate type for each city. This time we will utilize bootstrapping method using <code class="docutils literal notranslate"><span class="pre">scipy.bootstrap</span></code>. Minimum <code class="docutils literal notranslate"><span class="pre">sample</span> <span class="pre">size</span></code> is set to <code class="docutils literal notranslate"><span class="pre">50</span></code>, hence <code class="docutils literal notranslate"><span class="pre">hp</span> <span class="pre">-</span> <span class="pre">hak</span> <span class="pre">pakai</span></code> will not be tested.</p>
<p>Let’s take an example of multiple testing for house located in <code class="docutils literal notranslate"><span class="pre">Bogor</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">median_diff</span><span class="p">(</span><span class="n">sample_1</span><span class="p">,</span> <span class="n">sample_2</span><span class="p">):</span>
    <span class="n">statistic</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">sample_1</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">sample_2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">statistic</span>

<span class="n">sample_size</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">city</span> <span class="o">=</span> <span class="s1">&#39; Bogor&#39;</span>
<span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;shm - sertifikat hak milik&#39;</span><span class="p">,</span> <span class="s1">&#39;hgb - hak guna bangunan&#39;</span><span class="p">,</span> <span class="s1">&#39;lainnya (ppjb,girik,adat,dll)&#39;</span><span class="p">]</span>
<span class="n">sample_1</span> <span class="o">=</span> \
    <span class="n">house_df</span><span class="p">[(</span><span class="n">house_df</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="s1">&#39; Bogor&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">certificate</span> <span class="o">==</span> <span class="s1">&#39;shm - sertifikat hak milik&#39;</span><span class="p">)]</span>\
        <span class="o">.</span><span class="n">price_in_rp</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="n">sample_2</span> <span class="o">=</span> \
    <span class="n">house_df</span><span class="p">[(</span><span class="n">house_df</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="s1">&#39; Bogor&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">certificate</span> <span class="o">==</span> <span class="s1">&#39;hgb - hak guna bangunan&#39;</span><span class="p">)]</span>\
        <span class="o">.</span><span class="n">price_in_rp</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample_1</span><span class="p">,</span> <span class="n">sample_2</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">bootstrap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">median_diff</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;basic&#39;</span><span class="p">,</span> <span class="n">vectorized</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">res</span><span class="o">.</span><span class="n">confidence_interval</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ConfidenceInterval(low=-4646000000.0, high=-1038000000.0)
</pre></div>
</div>
</div>
</div>
<p>Based on interval above:</p>
<ul class="simple">
<li><p>the statistics is <code class="docutils literal notranslate"><span class="pre">median(sample_1)</span> <span class="pre">-</span> <span class="pre">median(sample_2)</span></code>, <code class="docutils literal notranslate"><span class="pre">sample_1</span> <span class="pre">=</span> <span class="pre">shm</span> <span class="pre">-</span> <span class="pre">sertifikat</span> <span class="pre">hak</span> <span class="pre">milik</span></code>, <code class="docutils literal notranslate"><span class="pre">sample_2</span> <span class="pre">=</span> <span class="pre">hgb</span> <span class="pre">-</span> <span class="pre">hak</span> <span class="pre">guna</span> <span class="pre">bangunan</span></code></p></li>
<li><p>The interval is located in <code class="docutils literal notranslate"><span class="pre">negative</span> <span class="pre">area</span></code>, means that for <code class="docutils literal notranslate"><span class="pre">Bogor</span></code> most of house with <code class="docutils literal notranslate"><span class="pre">shm</span></code> certificate is associated with lower house price than house with <code class="docutils literal notranslate"><span class="pre">hgb</span></code> certificate. However we simply can’t conclude that <code class="docutils literal notranslate"><span class="pre">shm</span></code> drove the house price lower.</p></li>
<li><p>Recall that confidence interval contains the sensible value of estimate. Therefore, interval that includes <code class="docutils literal notranslate"><span class="pre">0</span></code> values means there is evidence of <strong>no median difference between tested samples</strong>. In above example, it concluded that there was a median difference between <code class="docutils literal notranslate"><span class="pre">shm</span></code> and <code class="docutils literal notranslate"><span class="pre">hgb</span></code>.</p></li>
<li><p>It is worth noting the practical significance of the calculated statistics. For example, median difference of <span class="math notranslate nohighlight">\(10,000,000\)</span> may reject the null hypotheses but was insignificance for typical house price.</p></li>
</ul>
<p>Above findings can also be inspected using box-plot below:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="s1">&#39; Bogor&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;certificate&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">[</span><span class="n">house_df</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="s1">&#39; Bogor&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;certificate&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">ax_</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">ticks</span><span class="p">[</span><span class="n">ticks</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xtick</span><span class="p">)</span> <span class="k">for</span> <span class="n">xtick</span> <span class="ow">in</span> <span class="n">xticks</span><span class="p">])</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Price in Rupiah&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Certificate Type&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Using codes below, we will look if there exist some patterns that follows our believe of <code class="docutils literal notranslate"><span class="pre">certificate</span></code> order:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">order</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;certificate&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity&#39;</span><span class="p">,</span> <span class="s1">&#39;property_condition&#39;</span><span class="p">,</span> <span class="s1">&#39;furnishing&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="n">certificate_order</span><span class="p">,</span> <span class="n">electricity_order</span><span class="p">,</span> <span class="n">property_condition_order</span><span class="p">,</span> <span class="n">furnishing_order</span><span class="p">]):</span>
    <span class="n">house_df_simple</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> \
        <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span>
            <span class="n">values</span><span class="o">=</span><span class="n">house_df_simple</span><span class="p">[</span><span class="n">column</span><span class="p">],</span>
            <span class="n">categories</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
<span class="n">cities</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39; Bogor&#39;</span><span class="p">,</span> <span class="s1">&#39; Depok&#39;</span><span class="p">,</span> <span class="s1">&#39; Tangerang&#39;</span><span class="p">,</span> <span class="s1">&#39; Bekasi&#39;</span><span class="p">,</span> <span class="s1">&#39; DKI Jakarta&#39;</span><span class="p">]</span>
<span class="n">categories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">house_df_simple</span><span class="o">.</span><span class="n">certificate</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">categories</span><span class="p">))]</span>
<span class="n">combination</span> <span class="o">=</span> <span class="p">[</span><span class="n">comb</span> <span class="k">for</span> <span class="n">comb</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">sample_size</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">for</span> <span class="n">city</span> <span class="ow">in</span> <span class="n">cities</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">house_df_simple</span><span class="p">[</span><span class="n">house_df_simple</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="n">city</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">index_1</span><span class="p">,</span> <span class="n">index_2</span> <span class="ow">in</span> <span class="n">combination</span><span class="p">:</span>
        <span class="n">category_1</span> <span class="o">=</span> <span class="n">categories</span><span class="p">[</span><span class="n">index_1</span><span class="p">]</span>
        <span class="n">category_2</span> <span class="o">=</span> <span class="n">categories</span><span class="p">[</span><span class="n">index_2</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sample_1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span>
                <span class="n">df</span><span class="o">.</span><span class="n">certificate</span> <span class="o">==</span> <span class="n">category_1</span>
                <span class="p">]</span><span class="o">.</span><span class="n">price_in_rp</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
            <span class="n">sample_2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span>
                <span class="n">df</span><span class="o">.</span><span class="n">certificate</span> <span class="o">==</span> <span class="n">category_2</span>
                <span class="p">]</span><span class="o">.</span><span class="n">price_in_rp</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample_1</span><span class="p">,</span> <span class="n">sample_2</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">bootstrap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">median_diff</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;basic&#39;</span><span class="p">,</span> <span class="n">vectorized</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ci_l</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">confidence_interval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ci_h</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">confidence_interval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="n">city</span><span class="p">,</span> <span class="s1">&#39;category_1&#39;</span><span class="p">:</span> <span class="n">category_1</span><span class="p">,</span>
            <span class="s1">&#39;category_2&#39;</span><span class="p">:</span> <span class="n">category_2</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="n">category_1</span><span class="si">}</span><span class="s1">) - (</span><span class="si">{</span><span class="n">category_2</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ci_l&#39;</span><span class="p">:</span> <span class="n">ci_l</span><span class="p">,</span> <span class="s1">&#39;ci_h&#39;</span><span class="p">:</span> <span class="n">ci_h</span>
        <span class="p">})</span>
<span class="n">median_df_test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cities</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cities</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span><span class="p">))</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">city</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cities</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">median_df_test</span><span class="p">[</span><span class="n">median_df_test</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="n">city</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;category_1&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">category</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_l</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_h</span><span class="p">)</span>
    <span class="n">y_ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">())</span>
    <span class="n">x_ticks</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_l</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">-</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)),</span> <span class="n">ymax</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_h</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">-</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)),</span> <span class="n">ymax</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">category</span><span class="p">)),</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">category</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x_ticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xtick</span><span class="p">)</span> <span class="k">for</span> <span class="n">xtick</span> <span class="ow">in</span> <span class="n">x_ticks</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;95% Confidence Interval for Difference of Median Price, </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Difference of Median Price, in Rupiah&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Certificate Type&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_142_0.png" src="_images/2 - Data Exploration and Analysis_142_0.png" />
</div>
</div>
<p>The interval is somewhat arbitrary, no distinguishable pattern can be identified. If our believe was true, the interval would move from top-right to bottom-left.</p>
<p>There is also, in 95% confidence level, presents evidence of <code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">median</span> <span class="pre">difference</span></code> (interval includes <code class="docutils literal notranslate"><span class="pre">0</span></code> values, marked with red <code class="docutils literal notranslate"><span class="pre">x</span></code>).</p>
<p>In summary, statistically, higher house price is not associated with specific <code class="docutils literal notranslate"><span class="pre">certificate</span></code> type. The linear model in the next chapter may prove this evidence, which we will acknowledge later.</p>
</section>
<section id="house-price-according-to-property-condition">
<h2>3.3. House Price according to Property Condition<a class="headerlink" href="#house-price-according-to-property-condition" title="Permalink to this headline">#</a></h2>
<p>Similar with previous section, we will investigate if homeowner believe that specific property condition (whether the house is new or needs some renovation) increases their house value.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;property_condition&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;property_condition&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">ax_</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">ticks</span><span class="p">[</span><span class="n">ticks</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xtick</span><span class="p">)</span> <span class="k">for</span> <span class="n">xtick</span> <span class="ow">in</span> <span class="n">xticks</span><span class="p">])</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Price in Rupiah&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Property Condition&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_146_0.png" src="_images/2 - Data Exploration and Analysis_146_0.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">cities</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39; Bogor&#39;</span><span class="p">,</span> <span class="s1">&#39; Depok&#39;</span><span class="p">,</span> <span class="s1">&#39; Tangerang&#39;</span><span class="p">,</span> <span class="s1">&#39; Bekasi&#39;</span><span class="p">,</span> <span class="s1">&#39; DKI Jakarta&#39;</span><span class="p">]</span>
<span class="n">analyze_condition</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;baru&#39;</span><span class="p">,</span> <span class="s1">&#39;bagus sekali&#39;</span><span class="p">,</span> <span class="s1">&#39;bagus&#39;</span><span class="p">,</span> <span class="s1">&#39;sudah renovasi&#39;</span><span class="p">,</span> <span class="s1">&#39;butuh renovasi&#39;</span><span class="p">]</span>
<span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">sample_size</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">categories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">house_df_simple</span><span class="o">.</span><span class="n">property_condition</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">categories</span><span class="p">))]</span>
<span class="n">combination</span> <span class="o">=</span> <span class="p">[</span><span class="n">comb</span> <span class="k">for</span> <span class="n">comb</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">city</span> <span class="ow">in</span> <span class="n">cities</span><span class="p">:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">house_df_simple</span><span class="p">[</span>
        <span class="p">(</span><span class="n">house_df_simple</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="n">city</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">house_df</span><span class="o">.</span><span class="n">property_condition</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">analyze_condition</span><span class="p">))]</span>
    <span class="k">for</span> <span class="n">index_1</span><span class="p">,</span> <span class="n">index_2</span> <span class="ow">in</span> <span class="n">combination</span><span class="p">:</span>
        <span class="n">category_1</span> <span class="o">=</span> <span class="n">categories</span><span class="p">[</span><span class="n">index_1</span><span class="p">]</span>
        <span class="n">category_2</span> <span class="o">=</span> <span class="n">categories</span><span class="p">[</span><span class="n">index_2</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sample_1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span>
                <span class="n">df</span><span class="o">.</span><span class="n">property_condition</span> <span class="o">==</span> <span class="n">category_1</span>
                <span class="p">]</span><span class="o">.</span><span class="n">price_in_rp</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
            <span class="n">sample_2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span>
               <span class="n">df</span><span class="o">.</span><span class="n">property_condition</span> <span class="o">==</span> <span class="n">category_2</span>
                <span class="p">]</span><span class="o">.</span><span class="n">price_in_rp</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample_1</span><span class="p">,</span> <span class="n">sample_2</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">bootstrap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">median_diff</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;basic&#39;</span><span class="p">,</span> <span class="n">vectorized</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ci_l</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">confidence_interval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ci_h</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">confidence_interval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="n">city</span><span class="p">,</span> <span class="s1">&#39;category_1&#39;</span><span class="p">:</span> <span class="n">category_1</span><span class="p">,</span>
            <span class="s1">&#39;category_2&#39;</span><span class="p">:</span> <span class="n">category_2</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="n">category_1</span><span class="si">}</span><span class="s1">) - (</span><span class="si">{</span><span class="n">category_2</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ci_l&#39;</span><span class="p">:</span> <span class="n">ci_l</span><span class="p">,</span> <span class="s1">&#39;ci_h&#39;</span><span class="p">:</span> <span class="n">ci_h</span>
        <span class="p">})</span>
<span class="n">median_df_test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cities</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cities</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="p">))</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">city</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cities</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">median_df_test</span><span class="p">[</span><span class="n">median_df_test</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="n">city</span><span class="p">]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">category</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_l</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_h</span><span class="p">)</span>
    <span class="n">y_ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">())</span>
    <span class="n">x_ticks</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_l</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">-</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)),</span> <span class="n">ymax</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">ci_h</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">-</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)),</span> <span class="n">ymax</span><span class="o">=</span><span class="p">(</span><span class="n">y_ticks</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_ticks</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.02</span><span class="p">)))</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">category</span><span class="p">)),</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">category</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x_ticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xtick</span><span class="p">)</span> <span class="k">for</span> <span class="n">xtick</span> <span class="ow">in</span> <span class="n">x_ticks</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;95% Confidence Interval for Difference of Median Price, </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Difference of Median Price, in Rupiah&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Property Condition&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Again, no distinguishable pattern can be identified. Statistical evidence of <code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">median</span> <span class="pre">difference</span></code> mostly present for each city in Jabodetabek.</p>
<p>Statistically, higher house price is not associated with specific <code class="docutils literal notranslate"><span class="pre">property</span> <span class="pre">condition</span></code>.</p>
</section>
<section id="house-price-according-to-electricity">
<h2>3.5. House Price according to Electricity<a class="headerlink" href="#house-price-according-to-electricity" title="Permalink to this headline">#</a></h2>
<p>In this section, we will investigate how <code class="docutils literal notranslate"><span class="pre">electricity</span></code> associated with house price. We also want to identify the price distribution of observations with missing <code class="docutils literal notranslate"><span class="pre">electricity</span></code> records, filled as <code class="docutils literal notranslate"><span class="pre">lainnya</span> <span class="pre">-</span> <span class="pre">mah</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;electricity&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;electricity&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">for</span> <span class="n">ax_</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">ax_</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">()</span>
    <span class="n">yticks</span> <span class="o">=</span> <span class="n">ticks</span><span class="p">[</span><span class="n">ticks</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ax_</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">())</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">ax_</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ytick</span><span class="p">)</span> <span class="k">for</span> <span class="n">ytick</span> <span class="ow">in</span> <span class="n">yticks</span><span class="p">])</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Electricity&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Price, in Rupiah&#39;</span><span class="p">)</span>
    <span class="n">ax_</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_152_0.png" src="_images/2 - Data Exploration and Analysis_152_0.png" />
</div>
</div>
<p>The missing <code class="docutils literal notranslate"><span class="pre">electricity</span></code> records cover almost entire house price range. Note that larger <code class="docutils literal notranslate"><span class="pre">electricity</span></code> is associated with larger house price. It is somewhat understandable because large house tends to have higher <code class="docutils literal notranslate"><span class="pre">electricity</span></code> setting. This reason can be proven if <code class="docutils literal notranslate"><span class="pre">electricity</span></code> has a high correlation coefficient with <code class="docutils literal notranslate"><span class="pre">building_size_m2</span></code>.</p>
</section>
<section id="house-price-according-to-numerical-features">
<h2>3.5. House Price according to Numerical Features<a class="headerlink" href="#house-price-according-to-numerical-features" title="Permalink to this headline">#</a></h2>
<p>In this section, we will identify whether <code class="docutils literal notranslate"><span class="pre">price_in_rp</span></code> has some recognizable pattern in particular numerical feature.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numerical_features</span> <span class="o">=</span> <span class="n">house_df</span>\
    <span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">])</span>\
        <span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="s1">&#39;year_built&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

<span class="k">for</span> <span class="p">(</span><span class="n">ax_index</span><span class="p">,</span> <span class="n">ax_</span><span class="p">),</span> <span class="n">feature</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndenumerate</span><span class="p">(</span><span class="n">ax</span><span class="p">),</span> <span class="n">numerical_features</span><span class="p">):</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">house_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">feature</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">ax_index</span><span class="p">])</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">house_df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s1">&#39;float&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">feature</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;long&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity_num&#39;</span><span class="p">]):</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">ax_index</span><span class="p">]</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">ax_index</span><span class="p">]</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="p">[</span><span class="n">ax_index</span><span class="p">]</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2 - Data Exploration and Analysis_156_0.png" src="_images/2 - Data Exploration and Analysis_156_0.png" />
</div>
</div>
<p>Linear pattern is identified in <code class="docutils literal notranslate"><span class="pre">building</span> <span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">land</span> <span class="pre">size</span></code> features. For variable (e.g. <code class="docutils literal notranslate"><span class="pre">floors</span></code>, <code class="docutils literal notranslate"><span class="pre">carports</span></code>), which larger value associated with larger building size, also shows increasing pattern of house price.</p>
<p>Heatmap of correlation coefficient is shown below. The coefficient is calculated using <code class="docutils literal notranslate"><span class="pre">Spearman</span></code> method. Clustering alogrithm is applied for the chart. It orders the features which has similar correlation located closely, resulting in tidier presentation hence easier to analyze.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columns_corr</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="o">~</span><span class="n">house_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">fac_columns</span><span class="p">))]</span>
<span class="n">house_df_corr</span> <span class="o">=</span> <span class="n">house_df</span><span class="p">[</span><span class="n">columns_corr</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;spearman&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">clustermap</span><span class="p">(</span><span class="n">house_df_corr</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vlag&#39;</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span> <span class="n">annot_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.matrix.ClusterGrid at 0x27686dd0a60&gt;
</pre></div>
</div>
<img alt="_images/2 - Data Exploration and Analysis_158_1.png" src="_images/2 - Data Exploration and Analysis_158_1.png" />
</div>
</div>
<p>From above heatmap, we can recognize feature that has a high correlation coefficient with <code class="docutils literal notranslate"><span class="pre">building_size_m2</span></code> also has a high correlation with <code class="docutils literal notranslate"><span class="pre">price_in_rp</span></code>. Those features possibly influence the house price, which will be analyzed in the next chapter.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="preparing-dataset-for-modeling">
<h1>4. Preparing Dataset for Modeling<a class="headerlink" href="#preparing-dataset-for-modeling" title="Permalink to this headline">#</a></h1>
<section id="subsetting-the-test-set-for-assessing-prediction">
<h2>4.1. Subsetting the Test Set for Assessing Prediction<a class="headerlink" href="#subsetting-the-test-set-for-assessing-prediction" title="Permalink to this headline">#</a></h2>
<p>Test set will be useful to assess how well our linear model generalize to the unknown observations independent of our dataset.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">price_in_rp</span>

<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
    <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">99</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="missing-values">
<h2>4.2. Missing Values<a class="headerlink" href="#missing-values" title="Permalink to this headline">#</a></h2>
<p>First let’s review missing data from our original dataset (yes, not <code class="docutils literal notranslate"><span class="pre">train</span></code> or <code class="docutils literal notranslate"><span class="pre">test</span> <span class="pre">set</span></code>). By evaluating <code class="docutils literal notranslate"><span class="pre">original</span> <span class="pre">dataset</span></code>, we analyze the possibility of missing value for both scenarios.</p>
<div class="cell tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numerical_features</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">DataExploration</span><span class="p">(</span><span class="n">house_df</span><span class="p">)</span><span class="o">.</span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="s1">&#39;nans&#39;</span><span class="p">,</span> <span class="n">numerical_features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>price_in_rp</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>long</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>32</td>
      <td>0.93</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>28</td>
      <td>0.81</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>2</td>
      <td>0.06</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>2</td>
      <td>0.06</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>6</td>
      <td>0.17</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>building_age</th>
      <td>1417</td>
      <td>41.13</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>year_built</th>
      <td>1417</td>
      <td>41.13</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>285</td>
      <td>8.27</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>For non-numeric features:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">non_numeric_features</span> <span class="o">=</span> <span class="n">house_df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">DataExploration</span><span class="p">(</span><span class="n">house_df</span><span class="p">)</span><span class="o">.</span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="s1">&#39;nans&#39;</span><span class="p">,</span> <span class="n">non_numeric_features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>url</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>title</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>address</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>district</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>city</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>facilities</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>ads_id</th>
      <td>4</td>
      <td>0.12</td>
      <td>object</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Remember that those observations (from our original dataset) with missing records may exist in <code class="docutils literal notranslate"><span class="pre">training</span> <span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span> <span class="pre">set</span></code> or may be in both. Therefore, we must develop method to handle missing value that works for <code class="docutils literal notranslate"><span class="pre">training</span> <span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span> <span class="pre">set</span></code>, and even <code class="docutils literal notranslate"><span class="pre">potential</span> <span class="pre">future</span> <span class="pre">data</span></code> which we want to predict if any. Possible method:</p>
<ol class="simple">
<li><p>Drop observations that have missing <code class="docutils literal notranslate"><span class="pre">bathrooms</span></code> or <code class="docutils literal notranslate"><span class="pre">bedrooms</span></code>, <code class="docutils literal notranslate"><span class="pre">land_size</span></code> and <code class="docutils literal notranslate"><span class="pre">building_size</span></code> records</p></li>
<li><p>Drop <code class="docutils literal notranslate"><span class="pre">building_age</span></code>, <code class="docutils literal notranslate"><span class="pre">year_built</span></code>, and <code class="docutils literal notranslate"><span class="pre">building_orientation</span></code> which have a lot of missing value</p></li>
<li><p>For missing <code class="docutils literal notranslate"><span class="pre">floors</span></code> and <code class="docutils literal notranslate"><span class="pre">electricity_num</span></code>, will be imputed. Features that used for imputation is best choosen according to its correlation coefficient (previous chapter).</p></li>
<li><p>For missing <code class="docutils literal notranslate"><span class="pre">certificate</span></code>, let’s assume <code class="docutils literal notranslate"><span class="pre">certificate</span> <span class="pre">=</span> <span class="pre">lainnya</span></code>.</p></li>
<li><p>For missing <code class="docutils literal notranslate"><span class="pre">property_condition</span></code> and <code class="docutils literal notranslate"><span class="pre">furnishing</span></code>, let’s assume majority of data.</p></li>
</ol>
<p>According to above explanation, it should be noted that if there are any <code class="docutils literal notranslate"><span class="pre">future</span> <span class="pre">data</span></code> that we want to predict, the only missing features that can be considered are <code class="docutils literal notranslate"><span class="pre">floors</span></code>, <code class="docutils literal notranslate"><span class="pre">electricity</span></code>, <code class="docutils literal notranslate"><span class="pre">certificate</span></code>, <code class="docutils literal notranslate"><span class="pre">property_condition</span></code> and <code class="docutils literal notranslate"><span class="pre">furnishing</span></code>. Other than that, the prediction can’t be performed.</p>
<p>In below codes, note that the imputation is fitted only with <code class="docutils literal notranslate"><span class="pre">train</span> <span class="pre">set</span></code> to ensure that the prediction model is isolated from <code class="docutils literal notranslate"><span class="pre">test</span> <span class="pre">set</span></code> (avoding data leakage)</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span><span class="p">,</span> <span class="n">KNNImputer</span>

<span class="c1"># 1. Drop observations that missing vital records</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">X_train</span>\
    <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">])</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">y_train</span><span class="p">[</span><span class="n">X_train</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="c1"># remember to also drop the particular index of label data</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">y_train</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># 2. Drop features with lot of NaN    </span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">X_train</span>\
    <span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;building_age&#39;</span><span class="p">,</span> <span class="s1">&#39;year_built&#39;</span><span class="p">,</span> <span class="s1">&#39;building_orientation&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># 3.a. Impute missing `floors`</span>
<span class="n">knn_imputer</span> <span class="o">=</span> <span class="n">KNNImputer</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">missing_floors_index</span> <span class="o">=</span> <span class="n">X_train</span><span class="p">[</span><span class="n">X_train</span><span class="o">.</span><span class="n">floors</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span>
<span class="n">features_estimator_floors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">]</span>
<span class="n">imputer_floors</span> <span class="o">=</span> <span class="n">knn_imputer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">[</span><span class="n">features_estimator_floors</span><span class="p">])</span>
<span class="n">imputed_data_floors</span> <span class="o">=</span> <span class="n">imputer_floors</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">[</span><span class="n">features_estimator_floors</span><span class="p">])</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">floors</span> <span class="o">=</span> <span class="n">imputed_data_floors</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">)</span>
<span class="c1"># 3.b. Impute missing `Electricity`</span>
<span class="n">features_estimator_electricity</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity_num&#39;</span>
    <span class="p">]</span>
<span class="n">missing_electricity_index</span> <span class="o">=</span> <span class="n">X_train</span><span class="p">[</span><span class="n">X_train</span><span class="o">.</span><span class="n">electricity_num</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span>
<span class="n">imputer_electricity</span> <span class="o">=</span> <span class="n">knn_imputer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">[</span><span class="n">features_estimator_electricity</span><span class="p">])</span>
<span class="n">imputed_data_electricity</span> <span class="o">=</span> <span class="n">imputer_electricity</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">[</span><span class="n">features_estimator_electricity</span><span class="p">])</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">electricity_num</span> <span class="o">=</span> <span class="n">imputed_data_electricity</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]</span>
    <span class="p">)</span>
<span class="c1"># 4. Impute missing `certificate`</span>
<span class="n">constant_imputer</span> <span class="o">=</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="s1">&#39;lainnya (ppjb,girik,adat,dll)&#39;</span><span class="p">)</span>
<span class="n">X_train</span><span class="p">[</span><span class="s1">&#39;certificate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">constant_imputer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">[[</span><span class="s1">&#39;certificate&#39;</span><span class="p">]])</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="c1"># 5. Impute missing `property_condition` and `furnishing`</span>
<span class="n">frequent_imputer</span> <span class="o">=</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;most_frequent&#39;</span><span class="p">)</span>
<span class="n">X_train</span><span class="p">[</span><span class="s1">&#39;property_condition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">frequent_imputer</span>\
    <span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">[[</span><span class="s1">&#39;property_condition&#39;</span><span class="p">]])</span>\
    <span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">X_train</span><span class="p">[</span><span class="s1">&#39;furnishing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">frequent_imputer</span>\
    <span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">[[</span><span class="s1">&#39;furnishing&#39;</span><span class="p">]])</span>\
    <span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s see the imputation result:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># missing floor imputation results</span>
<span class="n">show_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">]</span>
<span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">X_train</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">missing_floors_index</span><span class="p">,</span> <span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">(</span><span class="n">show_features</span><span class="p">)],</span>
    <span class="n">y_train</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>building_size_m2</th>
      <th>land_size_m2</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>floors</th>
      <th>price_in_rp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1265</th>
      <td>200.00</td>
      <td>187.00</td>
      <td>3</td>
      <td>3</td>
      <td>2.00</td>
      <td>2,750,000,000.00</td>
    </tr>
    <tr>
      <th>1465</th>
      <td>600.00</td>
      <td>250.00</td>
      <td>3</td>
      <td>3</td>
      <td>3.00</td>
      <td>13,000,000,000.00</td>
    </tr>
    <tr>
      <th>1703</th>
      <td>250.00</td>
      <td>320.00</td>
      <td>4</td>
      <td>4</td>
      <td>2.00</td>
      <td>8,300,000,000.00</td>
    </tr>
    <tr>
      <th>2425</th>
      <td>358.00</td>
      <td>200.00</td>
      <td>4</td>
      <td>4</td>
      <td>3.00</td>
      <td>10,100,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_output-scroll tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># missing electricity imputation results</span>
<span class="n">show_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity_num&#39;</span><span class="p">]</span>
<span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">X_train</span>\
    <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">missing_electricity_index</span><span class="p">,</span> <span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">(</span><span class="n">show_features</span><span class="p">)]</span>\
    <span class="o">.</span><span class="n">head</span><span class="p">(),</span>
    <span class="n">y_train</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>building_size_m2</th>
      <th>land_size_m2</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>floors</th>
      <th>electricity_num</th>
      <th>price_in_rp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>336.00</td>
      <td>136.00</td>
      <td>10</td>
      <td>11</td>
      <td>4.00</td>
      <td>3,500.00</td>
      <td>5,500,000,000.00</td>
    </tr>
    <tr>
      <th>6</th>
      <td>240.00</td>
      <td>136.00</td>
      <td>4</td>
      <td>4</td>
      <td>3.00</td>
      <td>2,200.00</td>
      <td>6,000,000,000.00</td>
    </tr>
    <tr>
      <th>7</th>
      <td>839.00</td>
      <td>785.00</td>
      <td>6</td>
      <td>5</td>
      <td>3.00</td>
      <td>16,500.00</td>
      <td>26,000,000,000.00</td>
    </tr>
    <tr>
      <th>32</th>
      <td>252.00</td>
      <td>250.00</td>
      <td>5</td>
      <td>4</td>
      <td>2.00</td>
      <td>3,300.00</td>
      <td>2,790,000,000.00</td>
    </tr>
    <tr>
      <th>35</th>
      <td>91.00</td>
      <td>120.00</td>
      <td>3</td>
      <td>2</td>
      <td>2.00</td>
      <td>2,200.00</td>
      <td>2,130,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="unnecessary-features-and-features-with-high-cardinality">
<h2>4.3. Unnecessary Features and Features with High Cardinality<a class="headerlink" href="#unnecessary-features-and-features-with-high-cardinality" title="Permalink to this headline">#</a></h2>
<p>Features with high cardinality won’t be useful for prediction hence will be dropped.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cols_to_drop</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;district&#39;</span><span class="p">,</span> <span class="s1">&#39;ads_id&#39;</span><span class="p">,</span> <span class="s1">&#39;facilities&#39;</span><span class="p">,</span> <span class="s1">&#39;property_type&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity&#39;</span><span class="p">]</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">cols_to_drop</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="conclusion-prepared-features">
<h2>4.4. Conclusion: Prepared Features<a class="headerlink" href="#conclusion-prepared-features" title="Permalink to this headline">#</a></h2>
<p>Our prepared fueatures should be as below:</p>
<div class="cell tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numerical_features</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">DataExploration</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span><span class="o">.</span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="s1">&#39;nans&#39;</span><span class="p">,</span> <span class="n">numerical_features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>lat</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>long</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>Int64</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hide-input&quot;</span><span class="p">]}</span>

<span class="n">non_numeric_features</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">DataExploration</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span><span class="o">.</span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="s1">&#39;nans&#39;</span><span class="p">,</span> <span class="n">non_numeric_features</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>city</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>certificate</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>property_condition</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>furnishing</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="additional-pipeline-for-test-set">
<h2>4.5. Additional: Pipeline for Test Set<a class="headerlink" href="#additional-pipeline-for-test-set" title="Permalink to this headline">#</a></h2>
<p>Scikit-learn provides <code class="docutils literal notranslate"><span class="pre">pipeline</span></code> program to create reusable transformer that contains sequential treatment/steps which to be applied to the dataset that passed into that <code class="docutils literal notranslate"><span class="pre">pipeline</span></code>.</p>
<section id="transformer-to-drop-observations-with-missing-records">
<h3><strong>Transformer to drop Observations with Missing Records</strong><a class="headerlink" href="#transformer-to-drop-observations-with-missing-records" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.base</span> <span class="kn">import</span> <span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span>

<span class="k">class</span> <span class="nc">RowsDropper</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Remove observations that missing any records from features that</span>
<span class="sd">    specified in `mandatory_features` </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mandatory_features</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mandatory_features</span> <span class="o">=</span> <span class="n">mandatory_features</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropped_index</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropped_index</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">X</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mandatory_features</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span>
        <span class="n">X_new</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mandatory_features</span><span class="p">)</span>
        <span class="n">X_new</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">X_new</span>
    
    <span class="k">def</span> <span class="nf">fit_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="features-dropper-transformer">
<h3><strong>Features-Dropper Transformer</strong><a class="headerlink" href="#features-dropper-transformer" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FeaturesDropper</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drop_list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drop_list</span> <span class="o">=</span> <span class="n">drop_list</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_dropped</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># checking if streamed data has unused features</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_dropped</span> <span class="o">+=</span>\
            <span class="p">[</span><span class="n">column</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">drop_list</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols_dropped</span><span class="p">:</span>
            <span class="n">X_new</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_dropped</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">X_new</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">X</span>
    
    <span class="k">def</span> <span class="nf">fit_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="transformer-for-specific-columns">
<h3><strong>Transformer for Specific Columns</strong><a class="headerlink" href="#transformer-for-specific-columns" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FloorsKNNImputer</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span> <span class="o">=</span> <span class="n">KNNImputer</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_features_estimator_floors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">X_fit</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_fit</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_features_estimator_floors</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">X_transf</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">imputed_data_floors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_transf</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_features_estimator_floors</span><span class="p">])</span>
        <span class="n">X_new</span> <span class="o">=</span> <span class="n">X_transf</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
            <span class="n">floors</span> <span class="o">=</span> <span class="n">imputed_data_floors</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">X_new</span>
    
    <span class="k">def</span> <span class="nf">fit_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ElectricityKNNImputer</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span> <span class="o">=</span> <span class="n">KNNImputer</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_features_estimator_electricity</span> <span class="o">=</span> \
            <span class="p">[</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity_num&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">X_fit</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_fit</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_features_estimator_electricity</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">X_transf</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">imputed_data_electricity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_knn_imputer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_transf</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_features_estimator_electricity</span><span class="p">])</span>
        <span class="n">X_new</span> <span class="o">=</span> <span class="n">X_transf</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
            <span class="n">electricity_num</span> <span class="o">=</span> <span class="n">imputed_data_electricity</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">X_new</span>
    
    <span class="k">def</span> <span class="nf">fit_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="o">**</span><span class="n">fit_params</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="creating-pipeline-for-train-test-set">
<h3><strong>Creating Pipeline for Train-Test Set</strong><a class="headerlink" href="#creating-pipeline-for-train-test-set" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.compose</span> <span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">make_pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">set_config</span>

<span class="n">mandatory_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">]</span>
<span class="n">columns_to_drop</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;building_age&#39;</span><span class="p">,</span> <span class="s1">&#39;year_built&#39;</span><span class="p">,</span> <span class="s1">&#39;building_orientation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;district&#39;</span><span class="p">,</span> <span class="s1">&#39;ads_id&#39;</span><span class="p">,</span> <span class="s1">&#39;facilities&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;property_type&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity&#39;</span>
            <span class="p">]</span>
<span class="n">rows_dropper</span> <span class="o">=</span> <span class="n">RowsDropper</span><span class="p">(</span><span class="n">mandatory_features</span><span class="p">)</span>
<span class="n">features_dropper</span> <span class="o">=</span> <span class="n">FeaturesDropper</span><span class="p">(</span><span class="n">columns_to_drop</span><span class="p">)</span>
<span class="n">floors_imputer</span> <span class="o">=</span> <span class="n">FloorsKNNImputer</span><span class="p">()</span>
<span class="n">electricity_imputer</span> <span class="o">=</span> <span class="n">ElectricityKNNImputer</span><span class="p">()</span>
<span class="n">certificate_imputer</span> <span class="o">=</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="s1">&#39;lainnya (ppjb,girik,adat,dll)&#39;</span><span class="p">)</span>
<span class="n">features_transf</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;certificate_impute&#39;</span><span class="p">,</span> <span class="n">certificate_imputer</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;certificate&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;property_condition_impute&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;most_frequent&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;property_condition&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;furnishing_impute&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;most_frequent&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;furnishing&#39;</span><span class="p">])</span>
    <span class="p">],</span> <span class="n">remainder</span><span class="o">=</span><span class="s1">&#39;passthrough&#39;</span><span class="p">)</span>
<span class="n">dataset_transform_pipeline</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span>
    <span class="n">rows_dropper</span><span class="p">,</span>
    <span class="n">features_dropper</span><span class="p">,</span>
    <span class="n">floors_imputer</span><span class="p">,</span>
    <span class="n">electricity_imputer</span><span class="p">,</span>
    <span class="n">features_transf</span>
    <span class="p">)</span>

<span class="n">set_config</span><span class="p">(</span><span class="n">display</span><span class="o">=</span><span class="s1">&#39;diagram&#39;</span><span class="p">)</span>
<span class="n">dataset_transform_pipeline</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 {color: black;background-color: white;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 pre{padding: 0;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-toggleable {background-color: white;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-estimator:hover {background-color: #d4ebff;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 2em;bottom: 0;left: 50%;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-item {z-index: 1;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-parallel::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 2em;bottom: 0;left: 50%;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-parallel-item {display: flex;flex-direction: column;position: relative;background-color: white;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-parallel-item:only-child::after {width: 0;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;position: relative;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-label label {font-family: monospace;font-weight: bold;background-color: white;display: inline-block;line-height: 1.2em;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-label-container {position: relative;z-index: 2;text-align: center;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4 div.sk-text-repr-fallback {display: none;}</style><div id="sk-5d1f26be-1bed-41b6-9f74-dda76ab127f4" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>Pipeline(steps=[(&#x27;rowsdropper&#x27;,
                 RowsDropper(mandatory_features=[&#x27;price_in_rp&#x27;, &#x27;bedrooms&#x27;,
                                                 &#x27;bathrooms&#x27;,
                                                 &#x27;building_size_m2&#x27;,
                                                 &#x27;land_size_m2&#x27;])),
                (&#x27;featuresdropper&#x27;,
                 FeaturesDropper(drop_list=[&#x27;building_age&#x27;, &#x27;year_built&#x27;,
                                            &#x27;building_orientation&#x27;, &#x27;url&#x27;,
                                            &#x27;title&#x27;, &#x27;address&#x27;, &#x27;district&#x27;,
                                            &#x27;ads_id&#x27;, &#x27;facilities&#x27;,
                                            &#x27;property_type&#x27;, &#x27;electricity&#x27;])),
                (&#x27;floorsknnimputer&#x27;, Floors...
                (&#x27;columntransformer&#x27;,
                 ColumnTransformer(remainder=&#x27;passthrough&#x27;,
                                   transformers=[(&#x27;certificate_impute&#x27;,
                                                  SimpleImputer(fill_value=&#x27;lainnya &#x27;
                                                                           &#x27;(ppjb,girik,adat,dll)&#x27;,
                                                                strategy=&#x27;constant&#x27;),
                                                  [&#x27;certificate&#x27;]),
                                                 (&#x27;property_condition_impute&#x27;,
                                                  SimpleImputer(strategy=&#x27;most_frequent&#x27;),
                                                  [&#x27;property_condition&#x27;]),
                                                 (&#x27;furnishing_impute&#x27;,
                                                  SimpleImputer(strategy=&#x27;most_frequent&#x27;),
                                                  [&#x27;furnishing&#x27;])]))])</pre><b>Please rerun this cell to show the HTML repr or trust the notebook.</b></div><div class="sk-container" hidden><div class="sk-item sk-dashed-wrapped"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="478e38be-32bb-4d99-ac80-0ddba003c086" type="checkbox" ><label for="478e38be-32bb-4d99-ac80-0ddba003c086" class="sk-toggleable__label sk-toggleable__label-arrow">Pipeline</label><div class="sk-toggleable__content"><pre>Pipeline(steps=[(&#x27;rowsdropper&#x27;,
                 RowsDropper(mandatory_features=[&#x27;price_in_rp&#x27;, &#x27;bedrooms&#x27;,
                                                 &#x27;bathrooms&#x27;,
                                                 &#x27;building_size_m2&#x27;,
                                                 &#x27;land_size_m2&#x27;])),
                (&#x27;featuresdropper&#x27;,
                 FeaturesDropper(drop_list=[&#x27;building_age&#x27;, &#x27;year_built&#x27;,
                                            &#x27;building_orientation&#x27;, &#x27;url&#x27;,
                                            &#x27;title&#x27;, &#x27;address&#x27;, &#x27;district&#x27;,
                                            &#x27;ads_id&#x27;, &#x27;facilities&#x27;,
                                            &#x27;property_type&#x27;, &#x27;electricity&#x27;])),
                (&#x27;floorsknnimputer&#x27;, Floors...
                (&#x27;columntransformer&#x27;,
                 ColumnTransformer(remainder=&#x27;passthrough&#x27;,
                                   transformers=[(&#x27;certificate_impute&#x27;,
                                                  SimpleImputer(fill_value=&#x27;lainnya &#x27;
                                                                           &#x27;(ppjb,girik,adat,dll)&#x27;,
                                                                strategy=&#x27;constant&#x27;),
                                                  [&#x27;certificate&#x27;]),
                                                 (&#x27;property_condition_impute&#x27;,
                                                  SimpleImputer(strategy=&#x27;most_frequent&#x27;),
                                                  [&#x27;property_condition&#x27;]),
                                                 (&#x27;furnishing_impute&#x27;,
                                                  SimpleImputer(strategy=&#x27;most_frequent&#x27;),
                                                  [&#x27;furnishing&#x27;])]))])</pre></div></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="02dc35bb-086c-4675-aa94-340c58ab0833" type="checkbox" ><label for="02dc35bb-086c-4675-aa94-340c58ab0833" class="sk-toggleable__label sk-toggleable__label-arrow">RowsDropper</label><div class="sk-toggleable__content"><pre>RowsDropper(mandatory_features=[&#x27;price_in_rp&#x27;, &#x27;bedrooms&#x27;, &#x27;bathrooms&#x27;,
                                &#x27;building_size_m2&#x27;, &#x27;land_size_m2&#x27;])</pre></div></div></div><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="00dfd4da-e244-418a-8ed3-66ae82edf954" type="checkbox" ><label for="00dfd4da-e244-418a-8ed3-66ae82edf954" class="sk-toggleable__label sk-toggleable__label-arrow">FeaturesDropper</label><div class="sk-toggleable__content"><pre>FeaturesDropper(drop_list=[&#x27;building_age&#x27;, &#x27;year_built&#x27;, &#x27;building_orientation&#x27;,
                           &#x27;url&#x27;, &#x27;title&#x27;, &#x27;address&#x27;, &#x27;district&#x27;, &#x27;ads_id&#x27;,
                           &#x27;facilities&#x27;, &#x27;property_type&#x27;, &#x27;electricity&#x27;])</pre></div></div></div><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="7e9994f3-29a2-41db-acfd-46132fbc7f8b" type="checkbox" ><label for="7e9994f3-29a2-41db-acfd-46132fbc7f8b" class="sk-toggleable__label sk-toggleable__label-arrow">FloorsKNNImputer</label><div class="sk-toggleable__content"><pre>FloorsKNNImputer()</pre></div></div></div><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="8e2f650f-71c0-4dd8-b7ee-251c25faec3b" type="checkbox" ><label for="8e2f650f-71c0-4dd8-b7ee-251c25faec3b" class="sk-toggleable__label sk-toggleable__label-arrow">ElectricityKNNImputer</label><div class="sk-toggleable__content"><pre>ElectricityKNNImputer()</pre></div></div></div><div class="sk-item sk-dashed-wrapped"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="dc10f258-4ce0-4419-9494-fa2ab769bc52" type="checkbox" ><label for="dc10f258-4ce0-4419-9494-fa2ab769bc52" class="sk-toggleable__label sk-toggleable__label-arrow">columntransformer: ColumnTransformer</label><div class="sk-toggleable__content"><pre>ColumnTransformer(remainder=&#x27;passthrough&#x27;,
                  transformers=[(&#x27;certificate_impute&#x27;,
                                 SimpleImputer(fill_value=&#x27;lainnya &#x27;
                                                          &#x27;(ppjb,girik,adat,dll)&#x27;,
                                               strategy=&#x27;constant&#x27;),
                                 [&#x27;certificate&#x27;]),
                                (&#x27;property_condition_impute&#x27;,
                                 SimpleImputer(strategy=&#x27;most_frequent&#x27;),
                                 [&#x27;property_condition&#x27;]),
                                (&#x27;furnishing_impute&#x27;,
                                 SimpleImputer(strategy=&#x27;most_frequent&#x27;),
                                 [&#x27;furnishing&#x27;])])</pre></div></div></div><div class="sk-parallel"><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="83cc9d2b-c9b4-42b4-92ed-0d2b09cff7ce" type="checkbox" ><label for="83cc9d2b-c9b4-42b4-92ed-0d2b09cff7ce" class="sk-toggleable__label sk-toggleable__label-arrow">certificate_impute</label><div class="sk-toggleable__content"><pre>[&#x27;certificate&#x27;]</pre></div></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="fb281ca0-863f-404e-8abb-8fd3dcc02223" type="checkbox" ><label for="fb281ca0-863f-404e-8abb-8fd3dcc02223" class="sk-toggleable__label sk-toggleable__label-arrow">SimpleImputer</label><div class="sk-toggleable__content"><pre>SimpleImputer(fill_value=&#x27;lainnya (ppjb,girik,adat,dll)&#x27;, strategy=&#x27;constant&#x27;)</pre></div></div></div></div></div></div><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="a39270d5-b69a-43fb-9625-1bbc5a9807ad" type="checkbox" ><label for="a39270d5-b69a-43fb-9625-1bbc5a9807ad" class="sk-toggleable__label sk-toggleable__label-arrow">property_condition_impute</label><div class="sk-toggleable__content"><pre>[&#x27;property_condition&#x27;]</pre></div></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="49bfa716-fa28-43a8-a3a5-7a0ec86c60e3" type="checkbox" ><label for="49bfa716-fa28-43a8-a3a5-7a0ec86c60e3" class="sk-toggleable__label sk-toggleable__label-arrow">SimpleImputer</label><div class="sk-toggleable__content"><pre>SimpleImputer(strategy=&#x27;most_frequent&#x27;)</pre></div></div></div></div></div></div><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="ff942ca3-96ba-40a0-ba36-19e79861184c" type="checkbox" ><label for="ff942ca3-96ba-40a0-ba36-19e79861184c" class="sk-toggleable__label sk-toggleable__label-arrow">furnishing_impute</label><div class="sk-toggleable__content"><pre>[&#x27;furnishing&#x27;]</pre></div></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="dc0ef4a0-bfd0-4d66-ab6f-7bab6f943ce1" type="checkbox" ><label for="dc0ef4a0-bfd0-4d66-ab6f-7bab6f943ce1" class="sk-toggleable__label sk-toggleable__label-arrow">SimpleImputer</label><div class="sk-toggleable__content"><pre>SimpleImputer(strategy=&#x27;most_frequent&#x27;)</pre></div></div></div></div></div></div><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="6d4b2580-3a5c-46be-a002-54aa8f1e46a6" type="checkbox" ><label for="6d4b2580-3a5c-46be-a002-54aa8f1e46a6" class="sk-toggleable__label sk-toggleable__label-arrow">remainder</label><div class="sk-toggleable__content"><pre></pre></div></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="6662d143-5b9f-4f32-a80a-ab64c88018a4" type="checkbox" ><label for="6662d143-5b9f-4f32-a80a-ab64c88018a4" class="sk-toggleable__label sk-toggleable__label-arrow">passthrough</label><div class="sk-toggleable__content"><pre>passthrough</pre></div></div></div></div></div></div></div></div></div></div></div></div></div></div>
</div>
</section>
<section id="demonstrating-pipeline-for-train-set">
<h3><strong>Demonstrating Pipeline for Train Set</strong><a class="headerlink" href="#demonstrating-pipeline-for-train-set" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_train</span><span class="p">,</span> <span class="n">df_test</span> <span class="o">=</span>  <span class="n">train_test_split</span><span class="p">(</span><span class="n">house_df</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">99</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">transfd_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;certificate&#39;</span><span class="p">,</span> <span class="s1">&#39;property_condition&#39;</span><span class="p">,</span> <span class="s1">&#39;furnishing&#39;</span><span class="p">]</span>
<span class="n">dataset_columns</span> <span class="o">=</span> \
    <span class="n">transfd_columns</span> <span class="o">+</span> <span class="p">[</span><span class="n">column</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">house_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns_to_drop</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">transfd_columns</span><span class="p">]</span>

<span class="n">train_set_transfd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">dataset_transform_pipeline</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_train</span><span class="p">),</span> 
    <span class="n">columns</span><span class="o">=</span><span class="n">dataset_columns</span><span class="p">)</span>
<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">train_set_transfd</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">train_set_transfd</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">train_set_transfd</span><span class="p">[</span><span class="n">column</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
    
<span class="n">DataExploration</span><span class="p">(</span><span class="n">train_set_transfd</span><span class="p">)</span><span class="o">.</span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="s1">&#39;nans&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>certificate</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>property_condition</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>furnishing</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>price_in_rp</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>city</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>long</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># missing floor imputation results</span>
<span class="n">show_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">]</span>
<span class="n">train_set_transfd</span> <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">missing_floors_index</span><span class="p">,</span> <span class="n">train_set_transfd</span> <span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">(</span><span class="n">show_features</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>building_size_m2</th>
      <th>land_size_m2</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>floors</th>
      <th>price_in_rp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1265</th>
      <td>200.00</td>
      <td>187.00</td>
      <td>3</td>
      <td>3</td>
      <td>2.00</td>
      <td>2,750,000,000.00</td>
    </tr>
    <tr>
      <th>1465</th>
      <td>600.00</td>
      <td>250.00</td>
      <td>3</td>
      <td>3</td>
      <td>3.00</td>
      <td>13,000,000,000.00</td>
    </tr>
    <tr>
      <th>1703</th>
      <td>250.00</td>
      <td>320.00</td>
      <td>4</td>
      <td>4</td>
      <td>2.00</td>
      <td>8,300,000,000.00</td>
    </tr>
    <tr>
      <th>2425</th>
      <td>358.00</td>
      <td>200.00</td>
      <td>4</td>
      <td>4</td>
      <td>3.00</td>
      <td>10,100,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># missing electricity imputation results</span>
<span class="n">show_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;building_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;land_size_m2&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;floors&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity_num&#39;</span><span class="p">,</span> <span class="s1">&#39;price_in_rp&#39;</span><span class="p">]</span>
<span class="n">train_set_transfd</span> \
    <span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">missing_electricity_index</span><span class="p">,</span> <span class="n">train_set_transfd</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">(</span><span class="n">show_features</span><span class="p">)]</span>\
    <span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>building_size_m2</th>
      <th>land_size_m2</th>
      <th>bedrooms</th>
      <th>bathrooms</th>
      <th>floors</th>
      <th>electricity_num</th>
      <th>price_in_rp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>336.00</td>
      <td>136.00</td>
      <td>10</td>
      <td>11</td>
      <td>4.00</td>
      <td>3,500.00</td>
      <td>5,500,000,000.00</td>
    </tr>
    <tr>
      <th>6</th>
      <td>240.00</td>
      <td>136.00</td>
      <td>4</td>
      <td>4</td>
      <td>3.00</td>
      <td>2,200.00</td>
      <td>6,000,000,000.00</td>
    </tr>
    <tr>
      <th>7</th>
      <td>839.00</td>
      <td>785.00</td>
      <td>6</td>
      <td>5</td>
      <td>3.00</td>
      <td>16,500.00</td>
      <td>26,000,000,000.00</td>
    </tr>
    <tr>
      <th>32</th>
      <td>252.00</td>
      <td>250.00</td>
      <td>5</td>
      <td>4</td>
      <td>2.00</td>
      <td>3,300.00</td>
      <td>2,790,000,000.00</td>
    </tr>
    <tr>
      <th>35</th>
      <td>91.00</td>
      <td>120.00</td>
      <td>3</td>
      <td>2</td>
      <td>2.00</td>
      <td>2,200.00</td>
      <td>2,130,000,000.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The advantage of using pipeline is to assure that necessary dataset transformation can also be applied for the data independent of <code class="docutils literal notranslate"><span class="pre">train-test</span> <span class="pre">set</span></code>. As an example, here we will transform the <em>suspicious</em> house data records that has been isolated for analysis purposes.</p>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">suspicious_records</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Dataset/suspicious_records.csv&#39;</span><span class="p">)</span>
<span class="n">sus_set</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">dataset_transform_pipeline</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">suspicious_records</span><span class="p">),</span> 
    <span class="n">columns</span><span class="o">=</span><span class="n">dataset_columns</span><span class="p">)</span>

<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">sus_set</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">sus_set</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">sus_set</span><span class="p">[</span><span class="n">column</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s inspect transformed data:</p>
<div class="cell tag_output-scroll tag_output_scroll tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DataExploration</span><span class="p">(</span><span class="n">sus_set</span><span class="p">)</span><span class="o">.</span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="s1">&#39;nans&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>certificate</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>property_condition</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>furnishing</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>price_in_rp</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>city</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>long</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="demonstrating-pipeline-for-test-set">
<h3><strong>Demonstrating Pipeline for Test Set</strong><a class="headerlink" href="#demonstrating-pipeline-for-test-set" title="Permalink to this headline">#</a></h3>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">test_set_transfd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dataset_transform_pipeline</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df_test</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">dataset_columns</span><span class="p">)</span>
<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">test_set_transfd</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">test_set_transfd</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">test_set_transfd</span><span class="p">[</span><span class="n">column</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># show missing values summary   </span>
<span class="n">DataExploration</span><span class="p">(</span><span class="n">test_set_transfd</span><span class="p">)</span><span class="o">.</span><span class="n">show_nans_or_zeroes</span><span class="p">(</span><span class="s1">&#39;nans&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nans Count</th>
      <th>Nans Percentage (%)</th>
      <th>Data Types</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>certificate</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>property_condition</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>furnishing</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>price_in_rp</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>city</th>
      <td>0</td>
      <td>0.00</td>
      <td>object</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>long</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>land_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>building_size_m2</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>carports</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>maid_bedrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>maid_bathrooms</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>floors</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>garages</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>electricity_num</th>
      <td>0</td>
      <td>0.00</td>
      <td>float64</td>
    </tr>
    <tr>
      <th>fac_tempat_jemuran</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_jalur_telepon</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_jogging_track</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kolam_renang</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_masjid</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_keamanan</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_cctv</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kitchen_set</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_one_gate_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_akses_parkir</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_playground</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_wastafel</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_ac</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_basket</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_tempat_gym</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kolam_ikan</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_voli</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_tenis</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bola</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_mesin_cuci</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_lapangan_bulu_tangkis</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_kulkas</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_garden</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_water_heater</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_canopy</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_smart_home</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_backyard_luas</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_garasi</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_balkon</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_basement</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_gudang</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_clubhouse</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_service_area</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
    <tr>
      <th>fac_plumbing_system</th>
      <td>0</td>
      <td>0.00</td>
      <td>int64</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="exporting-pipeline-for-future-use">
<h3><strong>Exporting Pipeline for Future Use</strong><a class="headerlink" href="#exporting-pipeline-for-future-use" title="Permalink to this headline">#</a></h3>
<p>Fitted estimator can be persisted for future use. In this example, we will use scikit-learn <code class="docutils literal notranslate"><span class="pre">joblib</span></code>:</p>
<div class="cell tag_hide-input tag_output-scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">dump</span>

<span class="n">dump</span><span class="p">(</span><span class="n">dataset_transform_pipeline</span><span class="p">,</span> <span class="s1">&#39;Output\dataset_transform_pipeline.joblib&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Output\\dataset_transform_pipeline.joblib&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="exporting-train-test-set-for-other-models">
<h3><strong>Exporting Train-Test Set for other Models</strong><a class="headerlink" href="#exporting-train-test-set-for-other-models" title="Permalink to this headline">#</a></h3>
<div class="cell tag_hide-input tag_output-scroll tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Full dataset</span>
<span class="n">house_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;Dataset\jabodetabek_house_data_prcsd.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Train set</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">train_set_transfd</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">train_set_transfd</span><span class="p">[[</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span>
<span class="c1"># Test set</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">test_set_transfd</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">test_set_transfd</span><span class="p">[[</span><span class="s1">&#39;price_in_rp&#39;</span><span class="p">]]</span>
<span class="c1"># Export to csv</span>
<span class="n">X_train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;Dataset/X_train.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">y_train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;Dataset/y_train.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;Dataset/X_test.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">y_test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;Dataset/y_test.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="closing">
<h1>5. Closing<a class="headerlink" href="#closing" title="Permalink to this headline">#</a></h1>
<p>We already analyzed the dataset features and characteristic alongside handle ambiguous records. Features that are believed to be important aspects of house price already studied.</p>
<p>Typical house price is best to be presentad as median, with estimate of 1,500,000 rupiahs and margin of error no more than +- 90,000,000 rupiahs. It is found that there is not enough observations to estimate house price and make precise inference for <code class="docutils literal notranslate"><span class="pre">Jakarta</span> <span class="pre">Utara</span></code>.</p>
<p>It can be found that, based on provided data, there is no significant evidence that <strong>Jabodetabek House Price</strong> is influenced by <strong>building condition</strong>, <strong>furnishing condition</strong>, or <strong>certificate type</strong>. This analysis has been done by testing median difference for each available conditions and interpreting the confidence interval.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="1%20-%20Data%20Pre-Processing.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><strong>Data Pre-Processing</strong></p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="3%20-%20Linear%20Modeling%20of%20House%20Price.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><strong>Linear Regression Model of House Price in Jabodetabek Area and its Implementation</strong></p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Nafis Barizki<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>